{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"documentation/overview/","title":"Overview","text":"<p>WireGuard Portal is a simple, web-based configuration portal for WireGuard server management. The portal uses the WireGuard wgctrl library to manage existing VPN interfaces. This allows for the seamless activation or deactivation of new users without disturbing existing VPN connections.</p> <p>The configuration portal supports using a database (SQLite, MySQL, MsSQL, or Postgres), OAuth or LDAP (Active Directory or OpenLDAP) as a user source for authentication and profile data.</p>"},{"location":"documentation/overview/#features","title":"Features","text":"<ul> <li>Self-hosted - the whole application is a single binary</li> <li>Responsive multi-language web UI with dark-mode written in Vue.js</li> <li>Automatically selects IP from the network pool assigned to the client</li> <li>QR-Code for convenient mobile client configuration</li> <li>Sends email to the client with QR-code and client config</li> <li>Enable / Disable clients seamlessly</li> <li>Generation of wg-quick configuration file (<code>wgX.conf</code>) if required</li> <li>User authentication (database, OAuth, or LDAP), Passkey support</li> <li>IPv6 ready</li> <li>Docker ready</li> <li>Can be used with existing WireGuard setups</li> <li>Support for multiple WireGuard interfaces</li> <li>Supports multiple WireGuard backends (wgctrl or MikroTik)</li> <li>Peer Expiry Feature</li> <li>Handles route and DNS settings like wg-quick does</li> <li>Exposes Prometheus metrics for monitoring and alerting</li> <li>REST API for management and client deployment</li> <li>Webhook for custom actions on peer, interface, or user updates</li> </ul>"},{"location":"documentation/configuration/examples/","title":"Examples","text":"<p>Below are some sample YAML configurations demonstrating how to override some default values.</p>"},{"location":"documentation/configuration/examples/#basic","title":"Basic","text":"<pre><code>core:\n  admin_user: test@example.com\n  admin_password: password\n  admin_api_token: super-s3cr3t-api-token-or-a-UUID\n  import_existing: false\n  create_default_peer: true\n  self_provisioning_allowed: true\n\nbackend:\n  # default backend decides where new interfaces are created\n  default: mikrotik\n\n  # A prefix for resolvconf. Usually it is \"tun.\". If you are using systemd, the prefix should be empty.\n  local_resolvconf_prefix: \"tun.\"\n\n  mikrotik:\n    - id: mikrotik                   # unique id, not \"local\"\n      display_name: RouterOS RB5009  # optional nice name\n      api_url: https://10.10.10.10/rest\n      api_user: wgportal\n      api_password: a-super-secret-password\n      api_verify_tls: false        # set to false only if using self-signed during testing\n      api_timeout: 30s             # maximum request duration\n      concurrency: 5               # limit parallel REST calls to device\n      debug: false                 # verbose logging for this backend\n      ignored_interfaces:          # ignore these interfaces during import\n      - wgTest1\n      - wgTest2\n\nweb:\n  site_title: My WireGuard Server\n  site_company_name: My Company\n  listening_address: :8080\n  external_url: https://my.external-domain.com\n  csrf_secret: super-s3cr3t-csrf\n  session_secret: super-s3cr3t-session\n  request_logging: true\n\nadvanced:\n  log_level: trace\n  log_pretty: true\n  log_json: false\n  config_storage_path: /etc/wireguard\n  expiry_check_interval: 5m\n\ndatabase:\n  debug: true\n  type: sqlite\n  dsn: data/sqlite.db\n  encryption_passphrase: change-this-s3cr3t-encryption-passphrase\n\nauth:\n  webauthn:\n    enabled: true\n</code></pre>"},{"location":"documentation/configuration/examples/#ldap-authentication-and-synchronization","title":"LDAP Authentication and Synchronization","text":"<pre><code># ... (basic configuration)\n\nauth:\n  ldap:\n    # a sample LDAP provider with user sync enabled\n    - provider_name: ldap\n      url: ldap://srv-ad1.company.local:389\n      bind_user: ldap_wireguard@company.local\n      bind_pass: super-s3cr3t-ldap\n      base_dn: DC=COMPANY,DC=LOCAL\n      login_filter: (&amp;(objectClass=organizationalPerson)(mail={{login_identifier}})(!userAccountControl:1.2.840.113556.1.4.803:=2))\n      sync_interval: 15m\n      sync_filter: (&amp;(objectClass=organizationalPerson)(!userAccountControl:1.2.840.113556.1.4.803:=2)(mail=*))\n      disable_missing: true\n      field_map:\n        user_identifier: sAMAccountName\n        email: mail\n        firstname: givenName\n        lastname: sn\n        phone: telephoneNumber\n        department: department\n        memberof: memberOf\n      admin_group: CN=WireGuardAdmins,OU=Some-OU,DC=COMPANY,DC=LOCAL\n      registration_enabled: true\n      log_user_info: true\n</code></pre>"},{"location":"documentation/configuration/examples/#openid-connect-oidc-authentication","title":"OpenID Connect (OIDC) Authentication","text":"<pre><code># ... (basic configuration)\n\nauth:\n  oidc:\n    # A sample Entra ID provider with environment variable substitution.\n    # Only users with an @outlook.com email address are allowed to register or login.\n    - provider_name: azure\n      display_name: Login with&lt;/br&gt;Entra ID\n      registration_enabled: true\n      base_url: \"https://login.microsoftonline.com/${AZURE_TENANT_ID}/v2.0\"\n      client_id: \"${AZURE_CLIENT_ID}\"\n      client_secret: \"${AZURE_CLIENT_SECRET}\"\n      allowed_domains:\n        - \"outlook.com\"\n      extra_scopes:\n        - profile\n        - email\n\n    # a sample provider where users with the attribute `wg_admin` set to `true` are considered as admins\n    - provider_name: google\n      display_name: Login with&lt;/br&gt;Google\n      base_url: https://accounts.google.com\n      client_id: the-client-id-1234.apps.googleusercontent.com\n      client_secret: A_CLIENT_SECRET\n      extra_scopes:\n        - https://www.googleapis.com/auth/userinfo.email\n        - https://www.googleapis.com/auth/userinfo.profile\n      field_map:\n        user_identifier: sub\n        email: email\n        firstname: given_name\n        lastname: family_name\n        phone: phone_number\n        department: department\n        is_admin: wg_admin\n      admin_mapping:\n        admin_value_regex: ^true$\n      registration_enabled: true\n      log_user_info: true\n\n    # a sample provider where users in the group `the-admin-group` are considered as admins\n    - provider_name: google2\n      display_name: Login with&lt;/br&gt;Google2\n      base_url: https://accounts.google.com\n      client_id: another-client-id-1234.apps.googleusercontent.com\n      client_secret: A_CLIENT_SECRET\n      extra_scopes:\n        - https://www.googleapis.com/auth/userinfo.email\n        - https://www.googleapis.com/auth/userinfo.profile\n      field_map:\n        user_identifier: sub\n        email: email\n        firstname: given_name\n        lastname: family_name\n        phone: phone_number\n        department: department\n        user_groups: groups\n      admin_mapping:\n        admin_group_regex: ^the-admin-group$\n      registration_enabled: true\n      log_user_info: true\n</code></pre>"},{"location":"documentation/configuration/examples/#plain-oauth2-authentication","title":"Plain OAuth2 Authentication","text":"<pre><code># ... (basic configuration)\n\nauth:\n  oauth:\n    # a sample provider where users with the attribute `this-attribute-must-be-true` set to `true` or `True`\n    # are considered as admins\n    - provider_name: google3\n      display_name: Login with&lt;/br&gt;Google3\n      client_id: another-client-id-1234.apps.googleusercontent.com\n      client_secret: A_CLIENT_SECRET\n      auth_url: https://accounts.google.com/o/oauth2/v2/auth\n      token_url: https://oauth2.googleapis.com/token\n      user_info_url: https://openidconnect.googleapis.com/v1/userinfo\n      scopes:\n        - openid\n        - email\n        - profile\n      field_map:\n        user_identifier: sub\n        email: email\n        firstname: name\n        is_admin: this-attribute-must-be-true\n      admin_mapping:\n        admin_value_regex: ^(True|true)$\n      registration_enabled: true\n\n    # a sample provider where either users with the attribute `this-attribute-must-be-true` set to `true` or \n    # users in the group `admin-group-name` are considered as admins\n    - provider_name: google4\n      display_name: Login with&lt;/br&gt;Google4\n      client_id: another-client-id-1234.apps.googleusercontent.com\n      client_secret: A_CLIENT_SECRET\n      auth_url: https://accounts.google.com/o/oauth2/v2/auth\n      token_url: https://oauth2.googleapis.com/token\n      user_info_url: https://openidconnect.googleapis.com/v1/userinfo\n      scopes:\n        - openid\n        - email\n        - profile\n        - i-want-some-groups\n      field_map:\n        email: email\n        firstname: name\n        user_identifier: sub\n        is_admin: this-attribute-must-be-true\n        user_groups: groups\n      admin_mapping:\n        admin_value_regex: ^true$\n        admin_group_regex: ^admin-group-name$\n      registration_enabled: true\n      log_user_info: true\n</code></pre> <p>For more information, check out the usage documentation (e.g. General Configuration or Backends Configuration).</p>"},{"location":"documentation/configuration/overview/","title":"Overview","text":"<p>This page provides an overview of all available configuration options for WireGuard Portal.</p> <p>You can supply these configurations in a YAML file when starting the Portal. The path of the configuration file defaults to <code>config/config.yaml</code> (or <code>config/config.yml</code>) in the working directory of the executable. It is possible to override the configuration filepath using the environment variable <code>WG_PORTAL_CONFIG</code>. For example: <code>WG_PORTAL_CONFIG=/etc/wg-portal/config.yaml ./wg-portal</code>. Also, environment variable substitution in the config file is supported. Refer to the syntax.</p> <p>Configuration examples are available on the Examples page.</p> Default configuration <pre><code>core:\n  admin_user: admin@wgportal.local\n  admin_password: wgportal-default\n  admin_api_token: \"\"\n  disable_admin_user: false\n  editable_keys: true\n  create_default_peer: false\n  create_default_peer_on_creation: false\n  re_enable_peer_after_user_enable: true\n  delete_peer_after_user_deleted: false\n  self_provisioning_allowed: false\n  import_existing: true\n  restore_state: true\n\nbackend:\n  default: local\n  local_resolvconf_prefix: tun.\n\nadvanced:\n  log_level: info\n  log_pretty: false\n  log_json: false\n  start_listen_port: 51820\n  start_cidr_v4: 10.11.12.0/24\n  start_cidr_v6: fdfd:d3ad:c0de:1234::0/64\n  use_ip_v6: true\n  config_storage_path: \"\"\n  expiry_check_interval: 15m\n  rule_prio_offset: 20000\n  route_table_offset: 20000\n  api_admin_only: true\n  limit_additional_user_peers: 0\n\ndatabase:\n  debug: false\n  slow_query_threshold: \"0\"\n  type: sqlite\n  dsn: data/sqlite.db\n  encryption_passphrase: \"\"\n\nstatistics:\n  use_ping_checks: true\n  ping_check_workers: 10\n  ping_unprivileged: false\n  ping_check_interval: 1m\n  data_collection_interval: 1m\n  collect_interface_data: true\n  collect_peer_data: true\n  collect_audit_data: true\n  listening_address: :8787\n\nmail:\n  host: 127.0.0.1\n  port: 25\n  encryption: none\n  cert_validation: true\n  username: \"\"\n  password: \"\"\n  auth_type: plain\n  from: Wireguard Portal &lt;noreply@wireguard.local&gt;\n  link_only: false\n  allow_peer_email: false\n\nauth:\n  oidc: []\n  oauth: []\n  ldap: []\n  webauthn:\n    enabled: true\n  min_password_length: 16\n  hide_login_form: false\n\nweb:\n  listening_address: :8888\n  external_url: http://localhost:8888\n  site_company_name: WireGuard Portal\n  site_title: WireGuard Portal\n  session_identifier: wgPortalSession\n  session_secret: very_secret\n  csrf_secret: extremely_secret\n  request_logging: false\n  expose_host_info: false\n  cert_file: \"\"\n  key_File: \"\"\n\nwebhook:\n  url: \"\"\n  authentication: \"\"\n  timeout: 10s\n</code></pre> <p>Below you will find sections like <code>core</code>, <code>backend</code>, <code>advanced</code>, <code>database</code>, <code>statistics</code>, <code>mail</code>, <code>auth</code>, <code>web</code> and <code>webhook</code>. Each section describes the individual configuration keys, their default values, and a brief explanation of their purpose.</p>"},{"location":"documentation/configuration/overview/#core","title":"Core","text":"<p>These are the primary configuration options that control fundamental WireGuard Portal behavior. More advanced options are found in the subsequent <code>Advanced</code> section.</p>"},{"location":"documentation/configuration/overview/#admin_user","title":"<code>admin_user</code>","text":"<ul> <li>Default: <code>admin@wgportal.local</code></li> <li>Environment Variable: <code>WG_PORTAL_CORE_ADMIN_USER</code></li> <li>Description: The administrator user. This user will be created as a default admin if it does not yet exist.</li> </ul>"},{"location":"documentation/configuration/overview/#admin_password","title":"<code>admin_password</code>","text":"<ul> <li>Default: <code>wgportal-default</code></li> <li>Environment Variable: <code>WG_PORTAL_CORE_ADMIN_PASSWORD</code></li> <li>Description: The administrator password. The default password should be changed immediately!</li> <li>Important: The password should be strong and secure. The minimum password length is specified in auth.min_password_length. By default, it is 16 characters.</li> </ul>"},{"location":"documentation/configuration/overview/#disable_admin_user","title":"<code>disable_admin_user</code>","text":"<ul> <li>Default: <code>false</code></li> <li>Environment Variable: <code>WG_PORTAL_CORE_DISABLE_ADMIN_USER</code></li> <li>Description: If <code>true</code>, no admin user is created. This is useful if you plan to manage users exclusively through external authentication providers such as LDAP or OAuth.</li> </ul>"},{"location":"documentation/configuration/overview/#admin_api_token","title":"<code>admin_api_token</code>","text":"<ul> <li>Default: (empty)</li> <li>Environment Variable: <code>WG_PORTAL_CORE_ADMIN_API_TOKEN</code></li> <li>Description: An API token for the admin user. If a token is provided, the REST API can be accessed using this token. If empty, the API is initially disabled for the admin user.</li> </ul>"},{"location":"documentation/configuration/overview/#editable_keys","title":"<code>editable_keys</code>","text":"<ul> <li>Default: <code>true</code></li> <li>Environment Variable: <code>WG_PORTAL_CORE_EDITABLE_KEYS</code></li> <li>Description: Allow editing of WireGuard key-pairs directly in the UI.</li> </ul>"},{"location":"documentation/configuration/overview/#create_default_peer","title":"<code>create_default_peer</code>","text":"<ul> <li>Default: <code>false</code></li> <li>Environment Variable: <code>WG_PORTAL_CORE_CREATE_DEFAULT_PEER</code></li> <li>Description: If a user logs in for the first time with no existing peers, automatically create a new WireGuard peer for all server interfaces.</li> </ul>"},{"location":"documentation/configuration/overview/#create_default_peer_on_creation","title":"<code>create_default_peer_on_creation</code>","text":"<ul> <li>Default: <code>false</code></li> <li>Environment Variable: <code>WG_PORTAL_CORE_CREATE_DEFAULT_PEER_ON_CREATION</code></li> <li>Description: If an LDAP user is created (e.g., through LDAP sync) and has no peers, automatically create a new WireGuard peer for all server interfaces.</li> </ul>"},{"location":"documentation/configuration/overview/#re_enable_peer_after_user_enable","title":"<code>re_enable_peer_after_user_enable</code>","text":"<ul> <li>Default: <code>true</code></li> <li>Environment Variable: <code>WG_PORTAL_CORE_RE_ENABLE_PEER_AFTER_USER_ENABLE</code></li> <li>Description: Re-enable all peers that were previously disabled if the associated user is re-enabled.</li> </ul>"},{"location":"documentation/configuration/overview/#delete_peer_after_user_deleted","title":"<code>delete_peer_after_user_deleted</code>","text":"<ul> <li>Default: <code>false</code></li> <li>Environment Variable: <code>WG_PORTAL_CORE_DELETE_PEER_AFTER_USER_DELETED</code></li> <li>Description: If a user is deleted, remove all linked peers. Otherwise, peers remain but are disabled.</li> </ul>"},{"location":"documentation/configuration/overview/#self_provisioning_allowed","title":"<code>self_provisioning_allowed</code>","text":"<ul> <li>Default: <code>false</code></li> <li>Environment Variable: <code>WG_PORTAL_CORE_SELF_PROVISIONING_ALLOWED</code></li> <li>Description: Allow registered (non-admin) users to self-provision peers from their profile page.</li> </ul>"},{"location":"documentation/configuration/overview/#import_existing","title":"<code>import_existing</code>","text":"<ul> <li>Default: <code>true</code></li> <li>Environment Variable: <code>WG_PORTAL_CORE_IMPORT_EXISTING</code></li> <li>Description: On startup, import existing WireGuard interfaces and peers into WireGuard Portal.</li> </ul>"},{"location":"documentation/configuration/overview/#restore_state","title":"<code>restore_state</code>","text":"<ul> <li>Default: <code>true</code></li> <li>Environment Variable: <code>WG_PORTAL_CORE_RESTORE_STATE</code></li> <li>Description: Restore the WireGuard interface states (up/down) that existed before WireGuard Portal started.</li> </ul>"},{"location":"documentation/configuration/overview/#backend","title":"Backend","text":"<p>Configuration options for the WireGuard backend, which manages the WireGuard interfaces and peers. The current MikroTik backend is in BETA and may not support all features.</p>"},{"location":"documentation/configuration/overview/#default","title":"<code>default</code>","text":"<ul> <li>Default: <code>local</code></li> <li>Description: The default backend to use for managing WireGuard interfaces.    Valid options are: <code>local</code>, or other backend id's configured in the <code>mikrotik</code> section.</li> </ul>"},{"location":"documentation/configuration/overview/#local_resolvconf_prefix","title":"<code>local_resolvconf_prefix</code>","text":"<ul> <li>Default: <code>tun.</code></li> <li>Environment Variable: <code>WG_PORTAL_BACKEND_LOCAL_RESOLVCONF_PREFIX</code></li> <li>Description: Interface name prefix for WireGuard interfaces on the local system which is used to configure DNS servers with resolvconf.    It depends on the resolvconf implementation you are using, most use a prefix of <code>tun.</code>, but some have an empty prefix (e.g., systemd).</li> </ul>"},{"location":"documentation/configuration/overview/#ignored_local_interfaces","title":"<code>ignored_local_interfaces</code>","text":"<ul> <li>Default: (empty)</li> <li>Environment Variable: <code>WG_PORTAL_BACKEND_IGNORED_LOCAL_INTERFACES</code>   (comma-separated values)</li> <li>Description: A list of interface names to exclude when enumerating local interfaces.   This is useful if you want to prevent certain interfaces from being imported from the local system.</li> </ul>"},{"location":"documentation/configuration/overview/#mikrotik","title":"Mikrotik","text":"<p>The <code>mikrotik</code> array contains a list of MikroTik backend definitions. Each entry describes how to connect to a MikroTik RouterOS instance that hosts WireGuard interfaces.</p> <p>Below are the properties for each entry inside <code>backend.mikrotik</code>:</p>"},{"location":"documentation/configuration/overview/#id","title":"<code>id</code>","text":"<ul> <li>Default: (empty)</li> <li>Description: A unique identifier for this backend.    This value can be referenced by <code>backend.default</code> to use this backend as default.   The identifier must be unique across all backends and must not use the reserved keyword <code>local</code>.</li> </ul>"},{"location":"documentation/configuration/overview/#display_name","title":"<code>display_name</code>","text":"<ul> <li>Default: (empty)</li> <li>Description: A human-friendly display name for this backend. If omitted, the <code>id</code> will be used as the display name.</li> </ul>"},{"location":"documentation/configuration/overview/#api_url","title":"<code>api_url</code>","text":"<ul> <li>Default: (empty)</li> <li>Description: Base URL of the MikroTik REST API, including scheme and path, e.g., <code>https://10.10.10.10:8729/rest</code>.</li> </ul>"},{"location":"documentation/configuration/overview/#api_user","title":"<code>api_user</code>","text":"<ul> <li>Default: (empty)</li> <li>Description: Username for authenticating against the MikroTik API.   Ensure that the user has sufficient permissions to manage WireGuard interfaces and peers.</li> </ul>"},{"location":"documentation/configuration/overview/#api_password","title":"<code>api_password</code>","text":"<ul> <li>Default: (empty)</li> <li>Description: Password for the specified API user.</li> </ul>"},{"location":"documentation/configuration/overview/#api_verify_tls","title":"<code>api_verify_tls</code>","text":"<ul> <li>Default: <code>false</code></li> <li>Description: Whether to verify the TLS certificate of the MikroTik API endpoint. Set to <code>false</code> to allow self-signed certificates (not recommended for production).</li> </ul>"},{"location":"documentation/configuration/overview/#api_timeout","title":"<code>api_timeout</code>","text":"<ul> <li>Default: <code>30s</code></li> <li>Description: Timeout for API requests to the MikroTik device. Uses Go duration format (e.g., <code>10s</code>, <code>1m</code>). If omitted, a default of 30 seconds is used.</li> </ul>"},{"location":"documentation/configuration/overview/#concurrency","title":"<code>concurrency</code>","text":"<ul> <li>Default: <code>5</code></li> <li>Description: Maximum number of concurrent API requests the backend will issue when enumerating interfaces and their details. If <code>0</code> or negative, a sane default of <code>5</code> is used.</li> </ul>"},{"location":"documentation/configuration/overview/#ignored_interfaces","title":"<code>ignored_interfaces</code>","text":"<ul> <li>Default: (empty)</li> <li>Description: A list of interface names to exclude during interface enumeration.   This is useful if you want to prevent specific interfaces from being imported from the MikroTik device.</li> </ul>"},{"location":"documentation/configuration/overview/#debug","title":"<code>debug</code>","text":"<ul> <li>Default: <code>false</code></li> <li>Description: Enable verbose debug logging for the MikroTik backend.</li> </ul> <p>For more details on configuring the MikroTik backend, see the Backends documentation.</p>"},{"location":"documentation/configuration/overview/#advanced","title":"Advanced","text":"<p>Additional or more specialized configuration options for logging and interface creation details.</p>"},{"location":"documentation/configuration/overview/#log_level","title":"<code>log_level</code>","text":"<ul> <li>Default: <code>info</code></li> <li>Environment Variable: <code>WG_PORTAL_ADVANCED_LOG_LEVEL</code></li> <li>Description: The log level used by the application. Valid options are: <code>trace</code>, <code>debug</code>, <code>info</code>, <code>warn</code>, <code>error</code>.</li> </ul>"},{"location":"documentation/configuration/overview/#log_pretty","title":"<code>log_pretty</code>","text":"<ul> <li>Default: <code>false</code></li> <li>Environment Variable: <code>WG_PORTAL_ADVANCED_LOG_PRETTY</code></li> <li>Description: If <code>true</code>, log messages are colorized and formatted for readability (pretty-print).</li> </ul>"},{"location":"documentation/configuration/overview/#log_json","title":"<code>log_json</code>","text":"<ul> <li>Default: <code>false</code></li> <li>Environment Variable: <code>WG_PORTAL_ADVANCED_LOG_JSON</code></li> <li>Description: If <code>true</code>, log messages are structured in JSON format.</li> </ul>"},{"location":"documentation/configuration/overview/#start_listen_port","title":"<code>start_listen_port</code>","text":"<ul> <li>Default: <code>51820</code></li> <li>Environment Variable: <code>WG_PORTAL_ADVANCED_START_LISTEN_PORT</code></li> <li>Description: The first port to use when automatically creating new WireGuard interfaces.</li> </ul>"},{"location":"documentation/configuration/overview/#start_cidr_v4","title":"<code>start_cidr_v4</code>","text":"<ul> <li>Default: <code>10.11.12.0/24</code></li> <li>Environment Variable: <code>WG_PORTAL_ADVANCED_START_CIDR_V4</code></li> <li>Description: The initial IPv4 subnet to use when automatically creating new WireGuard interfaces.</li> </ul>"},{"location":"documentation/configuration/overview/#start_cidr_v6","title":"<code>start_cidr_v6</code>","text":"<ul> <li>Default: <code>fdfd:d3ad:c0de:1234::0/64</code></li> <li>Environment Variable: <code>WG_PORTAL_ADVANCED_START_CIDR_V6</code></li> <li>Description: The initial IPv6 subnet to use when automatically creating new WireGuard interfaces.</li> </ul>"},{"location":"documentation/configuration/overview/#use_ip_v6","title":"<code>use_ip_v6</code>","text":"<ul> <li>Default: <code>true</code></li> <li>Environment Variable: <code>WG_PORTAL_ADVANCED_USE_IP_V6</code></li> <li>Description: Enable or disable IPv6 support.</li> </ul>"},{"location":"documentation/configuration/overview/#config_storage_path","title":"<code>config_storage_path</code>","text":"<ul> <li>Default: (empty)</li> <li>Environment Variable: <code>WG_PORTAL_ADVANCED_CONFIG_STORAGE_PATH</code></li> <li>Description: Path to a directory where <code>wg-quick</code> style configuration files will be stored (if you need local filesystem configs).</li> </ul>"},{"location":"documentation/configuration/overview/#expiry_check_interval","title":"<code>expiry_check_interval</code>","text":"<ul> <li>Default: <code>15m</code></li> <li>Environment Variable: <code>WG_PORTAL_ADVANCED_EXPIRY_CHECK_INTERVAL</code></li> <li>Description: Interval after which existing peers are checked if they are expired. Format uses <code>s</code>, <code>m</code>, <code>h</code>, <code>d</code> for seconds, minutes, hours, days, see time.ParseDuration.</li> </ul>"},{"location":"documentation/configuration/overview/#rule_prio_offset","title":"<code>rule_prio_offset</code>","text":"<ul> <li>Default: <code>20000</code></li> <li>Environment Variable: <code>WG_PORTAL_ADVANCED_RULE_PRIO_OFFSET</code></li> <li>Description: Offset for IP route rule priorities when configuring routing.</li> </ul>"},{"location":"documentation/configuration/overview/#route_table_offset","title":"<code>route_table_offset</code>","text":"<ul> <li>Default: <code>20000</code></li> <li>Environment Variable: <code>WG_PORTAL_ADVANCED_ROUTE_TABLE_OFFSET</code></li> <li>Description: Offset for IP route table IDs when configuring routing.</li> </ul>"},{"location":"documentation/configuration/overview/#api_admin_only","title":"<code>api_admin_only</code>","text":"<ul> <li>Default: <code>true</code></li> <li>Environment Variable: <code>WG_PORTAL_ADVANCED_API_ADMIN_ONLY</code></li> <li>Description: If <code>true</code>, the public REST API is accessible only to admin users. The API docs live at <code>/api/v1/doc.html</code>.</li> </ul>"},{"location":"documentation/configuration/overview/#limit_additional_user_peers","title":"<code>limit_additional_user_peers</code>","text":"<ul> <li>Default: <code>0</code></li> <li>Environment Variable: <code>WG_PORTAL_ADVANCED_LIMIT_ADDITIONAL_USER_PEERS</code></li> <li>Description: Limit additional peers a normal user can create. <code>0</code> means unlimited.</li> </ul>"},{"location":"documentation/configuration/overview/#database","title":"Database","text":"<p>Configuration for the underlying database used by WireGuard Portal.  Supported databases include SQLite, MySQL, Microsoft SQL Server, and Postgres.</p> <p>If sensitive values (like private keys) should be stored in an encrypted format, set the <code>encryption_passphrase</code> option.</p>"},{"location":"documentation/configuration/overview/#debug_1","title":"<code>debug</code>","text":"<ul> <li>Default: <code>false</code></li> <li>Environment Variable: <code>WG_PORTAL_DATABASE_DEBUG</code></li> <li>Description: If <code>true</code>, logs all database statements (verbose).</li> </ul>"},{"location":"documentation/configuration/overview/#slow_query_threshold","title":"<code>slow_query_threshold</code>","text":"<ul> <li>Default: \"0\"</li> <li>Environment Variable: <code>WG_PORTAL_DATABASE_SLOW_QUERY_THRESHOLD</code></li> <li>Description: A time threshold (e.g., <code>100ms</code>) above which queries are considered slow and logged as warnings. If zero, slow query logging is disabled. Format uses <code>s</code>, <code>ms</code> for seconds, milliseconds, see time.ParseDuration. The value must be a string.</li> </ul>"},{"location":"documentation/configuration/overview/#type","title":"<code>type</code>","text":"<ul> <li>Default: <code>sqlite</code></li> <li>Environment Variable: <code>WG_PORTAL_DATABASE_TYPE</code></li> <li>Description: The database type. Valid options: <code>sqlite</code>, <code>mssql</code>, <code>mysql</code>, <code>postgres</code>.</li> </ul>"},{"location":"documentation/configuration/overview/#dsn","title":"<code>dsn</code>","text":"<ul> <li>Default: <code>data/sqlite.db</code></li> <li>Environment Variable: <code>WG_PORTAL_DATABASE_DSN</code></li> <li>Description: The Data Source Name (DSN) for connecting to the database.   For example:   <pre><code>user:pass@tcp(1.2.3.4:3306)/dbname?charset=utf8mb4&amp;parseTime=True&amp;loc=Local\n</code></pre></li> </ul>"},{"location":"documentation/configuration/overview/#encryption_passphrase","title":"<code>encryption_passphrase</code>","text":"<ul> <li>Default: (empty)</li> <li>Environment Variable: <code>WG_PORTAL_DATABASE_ENCRYPTION_PASSPHRASE</code></li> <li>Description: Passphrase for encrypting sensitive values such as private keys in the database. Encryption is only applied if this passphrase is set.   Important: Once you enable encryption by setting this passphrase, you cannot disable it or change it afterward.    New or updated records will be encrypted; existing data remains in plaintext until it\u2019s next modified.</li> </ul>"},{"location":"documentation/configuration/overview/#statistics","title":"Statistics","text":"<p>Controls how WireGuard Portal collects and reports usage statistics, including ping checks and Prometheus metrics.</p>"},{"location":"documentation/configuration/overview/#use_ping_checks","title":"<code>use_ping_checks</code>","text":"<ul> <li>Default: <code>true</code></li> <li>Environment Variable: <code>WG_PORTAL_STATISTICS_USE_PING_CHECKS</code></li> <li>Description: Enable periodic ping checks to verify that peers remain responsive.</li> </ul>"},{"location":"documentation/configuration/overview/#ping_check_workers","title":"<code>ping_check_workers</code>","text":"<ul> <li>Default: <code>10</code></li> <li>Environment Variable: <code>WG_PORTAL_STATISTICS_PING_CHECK_WORKERS</code></li> <li>Description: Number of parallel worker processes for ping checks.</li> </ul>"},{"location":"documentation/configuration/overview/#ping_unprivileged","title":"<code>ping_unprivileged</code>","text":"<ul> <li>Default: <code>false</code></li> <li>Environment Variable: <code>WG_PORTAL_STATISTICS_PING_UNPRIVILEGED</code></li> <li>Description: If <code>false</code>, ping checks run without root privileges. This is currently considered BETA.</li> </ul>"},{"location":"documentation/configuration/overview/#ping_check_interval","title":"<code>ping_check_interval</code>","text":"<ul> <li>Default: <code>1m</code></li> <li>Environment Variable: <code>WG_PORTAL_STATISTICS_PING_CHECK_INTERVAL</code></li> <li>Description: Interval between consecutive ping checks for all peers. Format uses <code>s</code>, <code>m</code>, <code>h</code>, <code>d</code> for seconds, minutes, hours, days, see time.ParseDuration.</li> </ul>"},{"location":"documentation/configuration/overview/#data_collection_interval","title":"<code>data_collection_interval</code>","text":"<ul> <li>Default: <code>1m</code></li> <li>Environment Variable: <code>WG_PORTAL_STATISTICS_DATA_COLLECTION_INTERVAL</code></li> <li>Description: Interval between data collection cycles (bytes sent/received, handshake times, etc.). Format uses <code>s</code>, <code>m</code>, <code>h</code>, <code>d</code> for seconds, minutes, hours, days, see time.ParseDuration.</li> </ul>"},{"location":"documentation/configuration/overview/#collect_interface_data","title":"<code>collect_interface_data</code>","text":"<ul> <li>Default: <code>true</code></li> <li>Environment Variable: <code>WG_PORTAL_STATISTICS_COLLECT_INTERFACE_DATA</code></li> <li>Description: If <code>true</code>, collects interface-level data (bytes in/out) for monitoring and statistics.</li> </ul>"},{"location":"documentation/configuration/overview/#collect_peer_data","title":"<code>collect_peer_data</code>","text":"<ul> <li>Default: <code>true</code></li> <li>Environment Variable: <code>WG_PORTAL_STATISTICS_COLLECT_PEER_DATA</code></li> <li>Description: If <code>true</code>, collects peer-level data (bytes, last handshake, endpoint, etc.).</li> </ul>"},{"location":"documentation/configuration/overview/#collect_audit_data","title":"<code>collect_audit_data</code>","text":"<ul> <li>Default: <code>true</code></li> <li>Environment Variable: <code>WG_PORTAL_STATISTICS_COLLECT_AUDIT_DATA</code></li> <li>Description: If <code>true</code>, logs certain portal events (such as user logins) to the database.</li> </ul>"},{"location":"documentation/configuration/overview/#listening_address","title":"<code>listening_address</code>","text":"<ul> <li>Default: <code>:8787</code></li> <li>Environment Variable: <code>WG_PORTAL_STATISTICS_LISTENING_ADDRESS</code></li> <li>Description: Address and port for the integrated Prometheus metric server (e.g., <code>:8787</code> or <code>127.0.0.1:8787</code>).</li> </ul>"},{"location":"documentation/configuration/overview/#mail","title":"Mail","text":"<p>Options for configuring email notifications or sending peer configurations via email.  By default, emails will only be sent to peers that have a valid user record linked.  To send emails to all peers that have a valid email-address as user-identifier, set <code>allow_peer_email</code> to <code>true</code>.</p>"},{"location":"documentation/configuration/overview/#host","title":"<code>host</code>","text":"<ul> <li>Default: <code>127.0.0.1</code></li> <li>Environment Variable: <code>WG_PORTAL_MAIL_HOST</code></li> <li>Description: Hostname or IP of the SMTP server.</li> </ul>"},{"location":"documentation/configuration/overview/#port","title":"<code>port</code>","text":"<ul> <li>Default: <code>25</code></li> <li>Environment Variable: <code>WG_PORTAL_MAIL_PORT</code></li> <li>Description: Port number for the SMTP server.</li> </ul>"},{"location":"documentation/configuration/overview/#encryption","title":"<code>encryption</code>","text":"<ul> <li>Default: <code>none</code></li> <li>Environment Variable: <code>WG_PORTAL_MAIL_ENCRYPTION</code></li> <li>Description: SMTP encryption type. Valid values: <code>none</code>, <code>tls</code>, <code>starttls</code>.</li> </ul>"},{"location":"documentation/configuration/overview/#cert_validation","title":"<code>cert_validation</code>","text":"<ul> <li>Default: <code>true</code></li> <li>Environment Variable: <code>WG_PORTAL_MAIL_CERT_VALIDATION</code></li> <li>Description: If <code>true</code>, validate the SMTP server certificate (relevant if <code>encryption</code> = <code>tls</code>).</li> </ul>"},{"location":"documentation/configuration/overview/#username","title":"<code>username</code>","text":"<ul> <li>Default: (empty)</li> <li>Environment Variable: <code>WG_PORTAL_MAIL_USERNAME</code></li> <li>Description: Optional SMTP username for authentication.</li> </ul>"},{"location":"documentation/configuration/overview/#password","title":"<code>password</code>","text":"<ul> <li>Default: (empty)</li> <li>Environment Variable: <code>WG_PORTAL_MAIL_PASSWORD</code></li> <li>Description: Optional SMTP password for authentication.</li> </ul>"},{"location":"documentation/configuration/overview/#auth_type","title":"<code>auth_type</code>","text":"<ul> <li>Default: <code>plain</code></li> <li>Environment Variable: <code>WG_PORTAL_MAIL_AUTH_TYPE</code></li> <li>Description: SMTP authentication type. Valid values: <code>plain</code>, <code>login</code>, <code>crammd5</code>.</li> </ul>"},{"location":"documentation/configuration/overview/#from","title":"<code>from</code>","text":"<ul> <li>Default: <code>Wireguard Portal &lt;noreply@wireguard.local&gt;</code></li> <li>Environment Variable: <code>WG_PORTAL_MAIL_FROM</code></li> <li>Description: The default \"From\" address when sending emails.</li> </ul>"},{"location":"documentation/configuration/overview/#link_only","title":"<code>link_only</code>","text":"<ul> <li>Default: <code>false</code></li> <li>Environment Variable: <code>WG_PORTAL_MAIL_LINK_ONLY</code></li> <li>Description: If <code>true</code>, emails only contain a link to WireGuard Portal, rather than attaching the full configuration.</li> </ul>"},{"location":"documentation/configuration/overview/#allow_peer_email","title":"<code>allow_peer_email</code>","text":"<ul> <li>Default: <code>false</code></li> <li>Environment Variable: <code>WG_PORTAL_MAIL_ALLOW_PEER_EMAIL</code></li> <li>Description: If <code>true</code>, and a peer has no valid user record linked, but the user-identifier of the peer is a valid email address, emails will be sent to that email address.   If false, and the peer has no valid user record linked, emails will not be sent.   If a peer has linked a valid user, the email address is always taken from the user record.</li> </ul>"},{"location":"documentation/configuration/overview/#auth","title":"Auth","text":"<p>WireGuard Portal supports multiple authentication strategies, including OpenID Connect (<code>oidc</code>), OAuth (<code>oauth</code>), Passkeys (<code>webauthn</code>) and LDAP (<code>ldap</code>). Each can have multiple providers configured. Below are the relevant keys.</p> <p>Some core authentication options are shared across all providers, while others are specific to each provider type.</p>"},{"location":"documentation/configuration/overview/#min_password_length","title":"<code>min_password_length</code>","text":"<ul> <li>Default: <code>16</code></li> <li>Environment Variable: <code>WG_PORTAL_AUTH_MIN_PASSWORD_LENGTH</code></li> <li>Description: Minimum password length for local authentication. This is not enforced for LDAP authentication.   The default admin password strength is also enforced by this setting.</li> <li>Important: The password should be strong and secure. It is recommended to use a password with at least 16 characters, including uppercase and lowercase letters, numbers, and special characters.</li> </ul>"},{"location":"documentation/configuration/overview/#hide_login_form","title":"<code>hide_login_form</code>","text":"<ul> <li>Default: <code>false</code></li> <li>Environment Variable: <code>WG_PORTAL_AUTH_HIDE_LOGIN_FORM</code></li> <li>Description: If <code>true</code>, the login form is hidden and only the OIDC, OAuth, LDAP, or WebAuthn providers are shown. This is useful if you want to enforce a specific authentication method.   If no social login providers are configured, the login form is always shown, regardless of this setting.</li> <li>Important: You can still access the login form by adding the <code>?all</code> query parameter to the login URL (e.g. https://wg.portal/#/login?all). </li> </ul>"},{"location":"documentation/configuration/overview/#oidc","title":"OIDC","text":"<p>The <code>oidc</code> array contains a list of OpenID Connect providers.  Below are the properties for each OIDC provider entry inside <code>auth.oidc</code>:</p>"},{"location":"documentation/configuration/overview/#provider_name","title":"<code>provider_name</code>","text":"<ul> <li>Default: (empty)</li> <li>Description: A unique name for this provider. Must not conflict with other providers.</li> </ul>"},{"location":"documentation/configuration/overview/#display_name_1","title":"<code>display_name</code>","text":"<ul> <li>Default: (empty)</li> <li>Description: A user-friendly name shown on the login page (e.g., \"Login with Google\").</li> </ul>"},{"location":"documentation/configuration/overview/#base_url","title":"<code>base_url</code>","text":"<ul> <li>Default: (empty)</li> <li>Description: The OIDC provider\u2019s base URL (e.g., <code>https://accounts.google.com</code>).</li> </ul>"},{"location":"documentation/configuration/overview/#client_id","title":"<code>client_id</code>","text":"<ul> <li>Default: (empty)</li> <li>Description: The OAuth client ID from the OIDC provider.</li> </ul>"},{"location":"documentation/configuration/overview/#client_secret","title":"<code>client_secret</code>","text":"<ul> <li>Default: (empty)</li> <li>Description: The OAuth client secret from the OIDC provider.</li> </ul>"},{"location":"documentation/configuration/overview/#extra_scopes","title":"<code>extra_scopes</code>","text":"<ul> <li>Default: (empty)</li> <li>Description: A list of additional OIDC scopes (e.g., <code>profile</code>, <code>email</code>).</li> </ul>"},{"location":"documentation/configuration/overview/#allowed_domains","title":"<code>allowed_domains</code>","text":"<ul> <li>Default: (empty)</li> <li>Description: A list of allowlisted domains. Only users with email addresses in these domains can log in or register. This is useful for restricting access to specific organizations or groups.</li> </ul>"},{"location":"documentation/configuration/overview/#field_map","title":"<code>field_map</code>","text":"<ul> <li>Default: (empty)</li> <li>Description: Maps OIDC claims to WireGuard Portal user fields. </li> <li> <p>Available fields: <code>user_identifier</code>, <code>email</code>, <code>firstname</code>, <code>lastname</code>, <code>phone</code>, <code>department</code>, <code>is_admin</code>, <code>user_groups</code>.</p> Field Typical OIDC Claim Explanation <code>user_identifier</code> <code>sub</code> or <code>preferred_username</code> A unique identifier for the user. Often the OIDC <code>sub</code> claim is used because it\u2019s guaranteed to be unique for the user within the IdP. Some providers also support <code>preferred_username</code> if it\u2019s unique. <code>email</code> <code>email</code> The user\u2019s email address as provided by the IdP. Not always verified, depending on IdP settings. <code>firstname</code> <code>given_name</code> The user\u2019s first name, typically provided by the IdP in the <code>given_name</code> claim. <code>lastname</code> <code>family_name</code> The user\u2019s last (family) name, typically provided by the IdP in the <code>family_name</code> claim. <code>phone</code> <code>phone_number</code> The user\u2019s phone number. This may require additional scopes/permissions from the IdP to access. <code>department</code> Custom claim (e.g., <code>department</code>) If the IdP can provide organizational data, it may store it in a custom claim. Adjust accordingly (e.g., <code>department</code>, <code>org</code>, or another attribute). <code>is_admin</code> Custom claim or derived role If the IdP returns a role or admin flag, you can map that to <code>is_admin</code>. Often this is managed through custom claims or group membership. <code>user_groups</code> <code>groups</code> or another custom claim A list of group memberships for the user. Some IdPs provide <code>groups</code> out of the box; others require custom claims or directory lookups. </li> </ul>"},{"location":"documentation/configuration/overview/#admin_mapping","title":"<code>admin_mapping</code>","text":"<ul> <li>Default: (empty)</li> <li>Description: WgPortal can grant a user admin rights by matching the value of the <code>is_admin</code> claim against a regular expression. Alternatively, a regular expression can be used to check if a user is member of a specific group listed in the <code>user_group</code> claim. The regular expressions are defined in <code>admin_value_regex</code> and <code>admin_group_regex</code>.<ul> <li><code>admin_value_regex</code>: A regular expression to match the <code>is_admin</code> claim. By default, this expression matches the string \"true\" (<code>^true$</code>).</li> <li><code>admin_group_regex</code>: A regular expression to match the <code>user_groups</code> claim. Each entry in the <code>user_groups</code> claim is checked against this regex.</li> </ul> </li> </ul>"},{"location":"documentation/configuration/overview/#registration_enabled","title":"<code>registration_enabled</code>","text":"<ul> <li>Default: <code>false</code></li> <li>Description: If <code>true</code>, a new user will be created in WireGuard Portal if not already present.</li> </ul>"},{"location":"documentation/configuration/overview/#log_user_info","title":"<code>log_user_info</code>","text":"<ul> <li>Default: <code>false</code></li> <li>Description: If <code>true</code>, OIDC user data is logged at the trace level upon login (for debugging).</li> </ul>"},{"location":"documentation/configuration/overview/#log_sensitive_info","title":"<code>log_sensitive_info</code>","text":"<ul> <li>Default: <code>false</code></li> <li>Description: If <code>true</code>, sensitive OIDC user data, such as tokens and raw responses, will be logged at the trace level upon login (for debugging).</li> <li>Important: Keep this setting disabled in production environments! Remove logs once you finished debugging authentication issues.</li> </ul>"},{"location":"documentation/configuration/overview/#oauth","title":"OAuth","text":"<p>The <code>oauth</code> array contains a list of plain OAuth2 providers. Below are the properties for each OAuth provider entry inside <code>auth.oauth</code>:</p>"},{"location":"documentation/configuration/overview/#provider_name_1","title":"<code>provider_name</code>","text":"<ul> <li>Default: (empty)</li> <li>Description: A unique name for this provider. Must not conflict with other providers.</li> </ul>"},{"location":"documentation/configuration/overview/#display_name_2","title":"<code>display_name</code>","text":"<ul> <li>Default: (empty)</li> <li>Description: A user-friendly name shown on the login page.</li> </ul>"},{"location":"documentation/configuration/overview/#client_id_1","title":"<code>client_id</code>","text":"<ul> <li>Default: (empty)</li> <li>Description: The OAuth client ID for the provider.</li> </ul>"},{"location":"documentation/configuration/overview/#client_secret_1","title":"<code>client_secret</code>","text":"<ul> <li>Default: (empty)</li> <li>Description: The OAuth client secret for the provider.</li> </ul>"},{"location":"documentation/configuration/overview/#auth_url","title":"<code>auth_url</code>","text":"<ul> <li>Default: (empty)</li> <li>Description: URL of the authentication endpoint.</li> </ul>"},{"location":"documentation/configuration/overview/#token_url","title":"<code>token_url</code>","text":"<ul> <li>Default: (empty)</li> <li>Description: URL of the token endpoint.</li> </ul>"},{"location":"documentation/configuration/overview/#user_info_url","title":"<code>user_info_url</code>","text":"<ul> <li>Default: (empty)</li> <li>Description: URL of the user information endpoint.</li> </ul>"},{"location":"documentation/configuration/overview/#scopes","title":"<code>scopes</code>","text":"<ul> <li>Default: (empty)</li> <li>Description: A list of OAuth scopes.</li> </ul>"},{"location":"documentation/configuration/overview/#allowed_domains_1","title":"<code>allowed_domains</code>","text":"<ul> <li>Default: (empty)</li> <li>Description: A list of allowlisted domains. Only users with email addresses in these domains can log in or register. This is useful for restricting access to specific organizations or groups.</li> </ul>"},{"location":"documentation/configuration/overview/#field_map_1","title":"<code>field_map</code>","text":"<ul> <li>Default: (empty)</li> <li>Description: Maps OAuth attributes to WireGuard Portal fields.</li> <li> <p>Available fields: <code>user_identifier</code>, <code>email</code>, <code>firstname</code>, <code>lastname</code>, <code>phone</code>, <code>department</code>, <code>is_admin</code>, <code>user_groups</code>.</p> Field Typical Claim Explanation <code>user_identifier</code> <code>sub</code> or <code>preferred_username</code> A unique identifier for the user. Often the OIDC <code>sub</code> claim is used because it\u2019s guaranteed to be unique for the user within the IdP. Some providers also support <code>preferred_username</code> if it\u2019s unique. <code>email</code> <code>email</code> The user\u2019s email address as provided by the IdP. Not always verified, depending on IdP settings. <code>firstname</code> <code>given_name</code> The user\u2019s first name, typically provided by the IdP in the <code>given_name</code> claim. <code>lastname</code> <code>family_name</code> The user\u2019s last (family) name, typically provided by the IdP in the <code>family_name</code> claim. <code>phone</code> <code>phone_number</code> The user\u2019s phone number. This may require additional scopes/permissions from the IdP to access. <code>department</code> Custom claim (e.g., <code>department</code>) If the IdP can provide organizational data, it may store it in a custom claim. Adjust accordingly (e.g., <code>department</code>, <code>org</code>, or another attribute). <code>is_admin</code> Custom claim or derived role If the IdP returns a role or admin flag, you can map that to <code>is_admin</code>. Often this is managed through custom claims or group membership. <code>user_groups</code> <code>groups</code> or another custom claim A list of group memberships for the user. Some IdPs provide <code>groups</code> out of the box; others require custom claims or directory lookups. </li> </ul>"},{"location":"documentation/configuration/overview/#admin_mapping_1","title":"<code>admin_mapping</code>","text":"<ul> <li>Default: (empty)</li> <li>Description: WgPortal can grant a user admin rights by matching the value of the <code>is_admin</code> claim against a regular expression. Alternatively, a regular expression can be used to check if a user is member of a specific group listed in the <code>user_group</code> claim. The regular expressions are defined in <code>admin_value_regex</code> and <code>admin_group_regex</code>.</li> <li><code>admin_value_regex</code>: A regular expression to match the <code>is_admin</code> claim. By default, this expression matches the string \"true\" (<code>^true$</code>).</li> <li><code>admin_group_regex</code>: A regular expression to match the <code>user_groups</code> claim. Each entry in the <code>user_groups</code> claim is checked against this regex.</li> </ul>"},{"location":"documentation/configuration/overview/#registration_enabled_1","title":"<code>registration_enabled</code>","text":"<ul> <li>Default: <code>false</code></li> <li>Description: If <code>true</code>, new users are created automatically on successful login.</li> </ul>"},{"location":"documentation/configuration/overview/#log_user_info_1","title":"<code>log_user_info</code>","text":"<ul> <li>Default: <code>false</code></li> <li>Description: If <code>true</code>, logs user info at the trace level upon login.</li> </ul>"},{"location":"documentation/configuration/overview/#log_sensitive_info_1","title":"<code>log_sensitive_info</code>","text":"<ul> <li>Default: <code>false</code></li> <li>Description: If <code>true</code>, sensitive OIDC user data, such as tokens and raw responses, will be logged at the trace level upon login (for debugging).</li> <li>Important: Keep this setting disabled in production environments! Remove logs once you finished debugging authentication issues.</li> </ul>"},{"location":"documentation/configuration/overview/#ldap","title":"LDAP","text":"<p>The <code>ldap</code> array contains a list of LDAP authentication providers. Below are the properties for each LDAP provider entry inside <code>auth.ldap</code>:</p>"},{"location":"documentation/configuration/overview/#provider_name_2","title":"<code>provider_name</code>","text":"<ul> <li>Default: (empty)</li> <li>Description: A unique name for this provider. Must not conflict with other providers.</li> </ul>"},{"location":"documentation/configuration/overview/#url","title":"<code>url</code>","text":"<ul> <li>Default: (empty)</li> <li>Description: The LDAP server URL (e.g., <code>ldap://srv-ad01.company.local:389</code>).</li> </ul>"},{"location":"documentation/configuration/overview/#start_tls","title":"<code>start_tls</code>","text":"<ul> <li>Default: <code>false</code></li> <li>Description: If <code>true</code>, use STARTTLS to secure the LDAP connection.</li> </ul>"},{"location":"documentation/configuration/overview/#cert_validation_1","title":"<code>cert_validation</code>","text":"<ul> <li>Default: <code>false</code></li> <li>Description: If <code>true</code>, validate the LDAP server\u2019s TLS certificate.</li> </ul>"},{"location":"documentation/configuration/overview/#tls_certificate_path","title":"<code>tls_certificate_path</code>","text":"<ul> <li>Default: (empty)</li> <li>Description: Path to a TLS certificate if needed for LDAP connections.</li> </ul>"},{"location":"documentation/configuration/overview/#tls_key_path","title":"<code>tls_key_path</code>","text":"<ul> <li>Default: (empty)</li> <li>Description: Path to the corresponding TLS certificate key.</li> </ul>"},{"location":"documentation/configuration/overview/#base_dn","title":"<code>base_dn</code>","text":"<ul> <li>Default: (empty)</li> <li>Description: The base DN for user searches (e.g., <code>DC=COMPANY,DC=LOCAL</code>).</li> </ul>"},{"location":"documentation/configuration/overview/#bind_user","title":"<code>bind_user</code>","text":"<ul> <li>Default: (empty)</li> <li>Description: The bind user for LDAP (e.g., <code>company\\\\ldap_wireguard</code> or <code>ldap_wireguard@company.local</code>).</li> </ul>"},{"location":"documentation/configuration/overview/#bind_pass","title":"<code>bind_pass</code>","text":"<ul> <li>Default: (empty)</li> <li>Description: The bind password for LDAP authentication.</li> </ul>"},{"location":"documentation/configuration/overview/#field_map_2","title":"<code>field_map</code>","text":"<ul> <li>Default: (empty)</li> <li> <p>Description: Maps LDAP attributes to WireGuard Portal fields.</p> <ul> <li>Available fields: <code>user_identifier</code>, <code>email</code>, <code>firstname</code>, <code>lastname</code>, <code>phone</code>, <code>department</code>, <code>memberof</code>.</li> </ul> WireGuard Portal Field Typical LDAP Attribute Short Description user_identifier sAMAccountName / uid Uniquely identifies the user within the LDAP directory. email mail / userPrincipalName Stores the user's primary email address. firstname givenName Contains the user's first (given) name. lastname sn Contains the user's last (surname) name. phone telephoneNumber / mobile Holds the user's phone or mobile number. department departmentNumber / ou Specifies the department or organizational unit of the user. memberof memberOf Lists the groups and roles to which the user belongs. </li> </ul>"},{"location":"documentation/configuration/overview/#login_filter","title":"<code>login_filter</code>","text":"<ul> <li>Default: (empty)</li> <li>Description: An LDAP filter to restrict which users can log in. Use <code>{{login_identifier}}</code> to insert the username.   For example:   <pre><code>(&amp;(objectClass=organizationalPerson)(mail={{login_identifier}})(!userAccountControl:1.2.840.113556.1.4.803:=2))\n</code></pre></li> <li>Important: The <code>login_filter</code> must always be a valid LDAP filter. It should at most return one user.    If the filter returns multiple or no users, the login will fail.</li> </ul>"},{"location":"documentation/configuration/overview/#admin_group","title":"<code>admin_group</code>","text":"<ul> <li>Default: (empty)</li> <li>Description: A specific LDAP group whose members are considered administrators in WireGuard Portal.   For example:   <pre><code>CN=WireGuardAdmins,OU=Some-OU,DC=YOURDOMAIN,DC=LOCAL\n</code></pre></li> </ul>"},{"location":"documentation/configuration/overview/#sync_interval","title":"<code>sync_interval</code>","text":"<ul> <li>Default: (empty)</li> <li>Description: How frequently (in duration, e.g. <code>30m</code>) to synchronize users from LDAP. Empty or <code>0</code> disables sync. Format uses <code>s</code>, <code>m</code>, <code>h</code>, <code>d</code> for seconds, minutes, hours, days, see time.ParseDuration.   Only users that match the <code>sync_filter</code> are synchronized, if <code>disable_missing</code> is <code>true</code>, users not found in LDAP are disabled.</li> </ul>"},{"location":"documentation/configuration/overview/#sync_filter","title":"<code>sync_filter</code>","text":"<ul> <li>Default: (empty)</li> <li>Description: An LDAP filter to select which users get synchronized into WireGuard Portal.   For example:   <pre><code>(&amp;(objectClass=organizationalPerson)(!userAccountControl:1.2.840.113556.1.4.803:=2)(mail=*))\n</code></pre></li> </ul>"},{"location":"documentation/configuration/overview/#sync_log_user_info","title":"<code>sync_log_user_info</code>","text":"<ul> <li>Default: <code>false</code></li> <li>Description: If <code>true</code>, logs LDAP user data at the trace level during synchronization.</li> </ul>"},{"location":"documentation/configuration/overview/#disable_missing","title":"<code>disable_missing</code>","text":"<ul> <li>Default: <code>false</code></li> <li>Description: If <code>true</code>, any user not found in LDAP (during sync) is disabled in WireGuard Portal.</li> </ul>"},{"location":"documentation/configuration/overview/#auto_re_enable","title":"<code>auto_re_enable</code>","text":"<ul> <li>Default: <code>false</code></li> <li>Description: If <code>true</code>, users that where disabled because they were missing (see <code>disable_missing</code>) will be re-enabled once they are found again.</li> </ul>"},{"location":"documentation/configuration/overview/#registration_enabled_2","title":"<code>registration_enabled</code>","text":"<ul> <li>Default: <code>false</code></li> <li>Description: If <code>true</code>, new user accounts are created in WireGuard Portal upon first login.</li> </ul>"},{"location":"documentation/configuration/overview/#log_user_info_2","title":"<code>log_user_info</code>","text":"<ul> <li>Default: <code>false</code></li> <li>Description: If <code>true</code>, logs LDAP user data at the trace level upon login.</li> </ul>"},{"location":"documentation/configuration/overview/#webauthn-passkeys","title":"WebAuthn (Passkeys)","text":"<p>The <code>webauthn</code> section contains configuration options for WebAuthn authentication (passkeys).</p>"},{"location":"documentation/configuration/overview/#enabled","title":"<code>enabled</code>","text":"<ul> <li>Default: <code>true</code></li> <li>Environment Variable: <code>WG_PORTAL_AUTH_WEBAUTHN_ENABLED</code></li> <li>Description: If <code>true</code>, Passkey authentication is enabled. If <code>false</code>, WebAuthn is disabled.   Users are encouraged to use Passkeys for secure authentication instead of passwords.    If a passkey is registered, the password login is still available as a fallback. Ensure that the password is strong and secure.</li> </ul>"},{"location":"documentation/configuration/overview/#web","title":"Web","text":"<p>The web section contains configuration options for the web server, including the listening address, session management, and CSRF protection. It is important to specify a valid <code>external_url</code> for the web server, especially if you are using a reverse proxy.  Without a valid <code>external_url</code>, the login process may fail due to CSRF protection.</p>"},{"location":"documentation/configuration/overview/#listening_address_1","title":"<code>listening_address</code>","text":"<ul> <li>Default: <code>:8888</code></li> <li>Environment Variable: <code>WG_PORTAL_WEB_LISTENING_ADDRESS</code></li> <li>Description: The listening address and port for the web server (e.g., <code>:8888</code> to bind on all interfaces or <code>127.0.0.1:8888</code> to bind only on the loopback interface).   Ensure that access to WireGuard Portal is protected against unauthorized access, especially if binding to all interfaces.</li> </ul>"},{"location":"documentation/configuration/overview/#external_url","title":"<code>external_url</code>","text":"<ul> <li>Default: <code>http://localhost:8888</code></li> <li>Environment Variable: <code>WG_PORTAL_WEB_EXTERNAL_URL</code></li> <li>Description: The URL where a client can access WireGuard Portal. This URL is used for generating links in emails and for performing OAUTH redirects. Important: If you are using a reverse proxy, set this to the external URL of the reverse proxy, otherwise login will fail. If you access the portal via IP address, set this to the IP address of the server.</li> </ul>"},{"location":"documentation/configuration/overview/#site_company_name","title":"<code>site_company_name</code>","text":"<ul> <li>Default: <code>WireGuard Portal</code></li> <li>Environment Variable: <code>WG_PORTAL_WEB_SITE_COMPANY_NAME</code></li> <li>Description: The company name that is shown at the bottom of the web frontend.</li> </ul>"},{"location":"documentation/configuration/overview/#site_title","title":"<code>site_title</code>","text":"<ul> <li>Default: <code>WireGuard Portal</code></li> <li>Environment Variable: <code>WG_PORTAL_WEB_SITE_TITLE</code></li> <li>Description: The title that is shown in the web frontend.</li> </ul>"},{"location":"documentation/configuration/overview/#session_identifier","title":"<code>session_identifier</code>","text":"<ul> <li>Default: <code>wgPortalSession</code></li> <li>Environment Variable: <code>WG_PORTAL_WEB_SESSION_IDENTIFIER</code></li> <li>Description: The session identifier for the web frontend.</li> </ul>"},{"location":"documentation/configuration/overview/#session_secret","title":"<code>session_secret</code>","text":"<ul> <li>Default: <code>very_secret</code></li> <li>Environment Variable: <code>WG_PORTAL_WEB_SESSION_SECRET</code></li> <li>Description: The session secret for the web frontend.</li> </ul>"},{"location":"documentation/configuration/overview/#csrf_secret","title":"<code>csrf_secret</code>","text":"<ul> <li>Default: <code>extremely_secret</code></li> <li>Environment Variable: <code>WG_PORTAL_WEB_CSRF_SECRET</code></li> <li>Description: The CSRF secret.</li> </ul>"},{"location":"documentation/configuration/overview/#request_logging","title":"<code>request_logging</code>","text":"<ul> <li>Default: <code>false</code></li> <li>Environment Variable: <code>WG_PORTAL_WEB_REQUEST_LOGGING</code></li> <li>Description: Log all HTTP requests.</li> </ul>"},{"location":"documentation/configuration/overview/#expose_host_info","title":"<code>expose_host_info</code>","text":"<ul> <li>Default: <code>false</code></li> <li>Environment Variable: <code>WG_PORTAL_WEB_EXPOSE_HOST_INFO</code></li> <li>Description: Expose the hostname and version of the WireGuard Portal server in an HTTP header. This is useful for debugging but may expose sensitive information.</li> </ul>"},{"location":"documentation/configuration/overview/#cert_file","title":"<code>cert_file</code>","text":"<ul> <li>Default: (empty)</li> <li>Environment Variable: <code>WG_PORTAL_WEB_CERT_FILE</code></li> <li>Description: (Optional) Path to the TLS certificate file.</li> </ul>"},{"location":"documentation/configuration/overview/#key_file","title":"<code>key_file</code>","text":"<ul> <li>Default: (empty)</li> <li>Environment Variable: <code>WG_PORTAL_WEB_KEY_FILE</code></li> <li>Description: (Optional) Path to the TLS certificate key file.</li> </ul>"},{"location":"documentation/configuration/overview/#webhook","title":"Webhook","text":"<p>The webhook section allows you to configure a webhook that is called on certain events in WireGuard Portal. Further details can be found in the usage documentation.</p>"},{"location":"documentation/configuration/overview/#url_1","title":"<code>url</code>","text":"<ul> <li>Default: (empty)</li> <li>Environment Variable: <code>WG_PORTAL_WEBHOOK_URL</code></li> <li>Description: The POST endpoint to which the webhook is sent. The URL must be reachable from the WireGuard Portal server. If the URL is empty, the webhook is disabled.</li> </ul>"},{"location":"documentation/configuration/overview/#authentication","title":"<code>authentication</code>","text":"<ul> <li>Default: (empty)</li> <li>Environment Variable: <code>WG_PORTAL_WEBHOOK_AUTHENTICATION</code></li> <li>Description: The Authorization header for the webhook endpoint. The value is send as-is in the header. For example: <code>Bearer &lt;token&gt;</code>.</li> </ul>"},{"location":"documentation/configuration/overview/#timeout","title":"<code>timeout</code>","text":"<ul> <li>Default: <code>10s</code></li> <li>Environment Variable: <code>WG_PORTAL_WEBHOOK_TIMEOUT</code></li> <li>Description: The timeout for the webhook request. If the request takes longer than this, it is aborted.</li> </ul>"},{"location":"documentation/getting-started/binaries/","title":"Binaries","text":"<p>Starting from v2, each release includes compiled binaries for supported platforms. These binary versions can be manually downloaded and installed.</p>"},{"location":"documentation/getting-started/binaries/#download","title":"Download","text":"<p>Make sure that you download the correct binary for your architecture. The available binaries are:</p> <ul> <li><code>wg-portal_linux_amd64</code> - Linux x86_64</li> <li><code>wg-portal_linux_arm64</code> - Linux ARM 64-bit</li> <li><code>wg-portal_linux_arm_v7</code> - Linux ARM 32-bit</li> </ul> <p>With <code>curl</code>:</p> <pre><code>curl -L -o wg-portal https://github.com/h44z/wg-portal/releases/download/${WG_PORTAL_VERSION}/wg-portal_linux_amd64 \n</code></pre> <p>With <code>wget</code>:</p> <pre><code>wget -O wg-portal https://github.com/h44z/wg-portal/releases/download/${WG_PORTAL_VERSION}/wg-portal_linux_amd64\n</code></pre> <p>with <code>gh cli</code>:</p> <pre><code>gh release download ${WG_PORTAL_VERSION} --repo h44z/wg-portal --output wg-portal --pattern '*amd64'\n</code></pre>"},{"location":"documentation/getting-started/binaries/#install","title":"Install","text":"<pre><code>sudo mkdir -p /opt/wg-portal\nsudo install wg-portal /opt/wg-portal/\n</code></pre>"},{"location":"documentation/getting-started/binaries/#unreleased-versions-master-branch-builds","title":"Unreleased versions (master branch builds)","text":"<p>Unreleased versions can be fetched directly from the artifacts section of the GitHub Workflow.</p>"},{"location":"documentation/getting-started/docker/","title":"Docker","text":""},{"location":"documentation/getting-started/docker/#image-usage","title":"Image Usage","text":"<p>The WireGuard Portal Docker image is available on both Docker Hub and GitHub Container Registry. It is built on the official Alpine Linux base image and comes pre-packaged with all necessary WireGuard dependencies.</p> <p>This container allows you to establish WireGuard VPN connections without relying on a host system that supports WireGuard or using the <code>linuxserver/wireguard</code> Docker image.</p> <p>The recommended method for deploying WireGuard Portal is via Docker Compose for ease of configuration and management.</p> <p>A sample docker-compose.yml (managing WireGuard interfaces directly on the host) is provided below:</p> <pre><code>---\nservices:\n  wg-portal:\n    image: wgportal/wg-portal:v2\n    container_name: wg-portal\n    restart: unless-stopped\n    logging:\n      options:\n        max-size: \"10m\"\n        max-file: \"3\"\n    cap_add:\n      - NET_ADMIN\n    # Use host network mode for WireGuard and the UI. Ensure that access to the UI is properly secured.\n    network_mode: \"host\"\n    volumes:\n      # left side is the host path, right side is the container path\n      - /etc/wireguard:/etc/wireguard\n      - ./data:/app/data\n      - ./config:/app/config\n</code></pre> <p>By default, the webserver for the UI is listening on port 8888 on all available interfaces.</p> <p>Volumes for <code>/app/data</code> and <code>/app/config</code> should be used ensure data persistence across container restarts.</p>"},{"location":"documentation/getting-started/docker/#wireguard-interface-handling","title":"WireGuard Interface Handling","text":"<p>WireGuard Portal supports managing WireGuard interfaces through three distinct deployment methods, providing flexibility based on your system architecture and operational preferences:</p> <ul> <li> <p>Directly on the host system:     WireGuard Portal can control WireGuard interfaces natively on the host, without using containers.     This setup is ideal for environments where direct access to system networking is preferred.    To use this method, you need to set the network mode to <code>host</code> in your docker-compose.yml file.    <pre><code>services:\n  wg-portal:\n    ...\n    network_mode: \"host\"\n    ...\n</code></pre></p> <p> If host networking is used, the WireGuard Portal UI will be accessible on all the host's IP addresses if the listening address is set to <code>:8888</code> in the configuration file.    To avoid this, you can bind the listening address to a specific IP address, for example, the loopback address (<code>127.0.0.1:8888</code>). It is also possible to deploy firewall rules to restrict access to the WireGuard Portal UI.</p> </li> <li> <p>Within the WireGuard Portal Docker container:     WireGuard interfaces can be managed directly from within the WireGuard Portal container itself.    This is the recommended approach when running WireGuard Portal via Docker, as it encapsulates all functionality in a single, portable container without requiring a separate WireGuard host or image.    <pre><code>services:\n  wg-portal:\n    image: wgportal/wg-portal:v2\n    container_name: wg-portal\n    ...\n    cap_add:\n      - NET_ADMIN\n    ports:\n      # host port : container port\n      # WireGuard port, needs to match the port in wg-portal interface config (add one port mapping for each interface)\n      - \"51820:51820/udp\" \n      # Web UI port\n      - \"8888:8888/tcp\"\n    sysctls:\n      - net.ipv4.conf.all.src_valid_mark=1\n    volumes:\n      # host path : container path\n      - ./wg/data:/app/data\n      - ./wg/config:/app/config\n</code></pre></p> </li> <li> <p>Via a separate Docker container:     WireGuard Portal can interface with and control WireGuard running in another Docker container, such as the linuxserver/wireguard image.    This method is useful in setups that already use <code>linuxserver/wireguard</code> or where you want to isolate the VPN backend from the portal frontend.    For this, you need to set the network mode to <code>service:wireguard</code> in your docker-compose.yml file, <code>wireguard</code> is the service name of your WireGuard container.    <pre><code>services:\n  wg-portal:\n    image: wgportal/wg-portal:v2\n    container_name: wg-portal\n    ...\n    cap_add:\n      - NET_ADMIN\n    network_mode: \"service:wireguard\" # So we ensure to stay on the same network as the wireguard container.\n    volumes:\n      # host path : container path\n      - ./wg/etc:/etc/wireguard\n      - ./wg/data:/app/data\n      - ./wg/config:/app/config\n\n  wireguard:\n    image: lscr.io/linuxserver/wireguard:latest\n    container_name: wireguard\n    restart: unless-stopped\n    cap_add:\n      - NET_ADMIN\n    ports:\n      # host port : container port\n      - \"51820:51820/udp\" # WireGuard port, needs to match the port in wg-portal interface config\n      - \"8888:8888/tcp\" # Noticed that the port of the web UI is exposed in the wireguard container.\n    volumes:\n      - ./wg/etc:/config/wg_confs # We share the configuration (wgx.conf) between wg-portal and wireguard\n    sysctls:\n      - net.ipv4.conf.all.src_valid_mark=1\n</code></pre>    As the <code>linuxserver/wireguard</code> image uses wg-quick to manage the interfaces, you need to have at least the following configuration set for WireGuard Portal:    <pre><code>core:\n  # The WireGuard container uses wg-quick to manage the WireGuard interfaces - this conflicts with WireGuard Portal during startup.\n  # To avoid this, we need to set the restore_state option to false so that wg-quick can create the interfaces.\n  restore_state: false\n  # Usually, there are no existing interfaces in the WireGuard container, so we can set this to false.\n  import_existing: false\nadvanced:\n  # WireGuard Portal needs to export the WireGuard configuration as wg-quick config files so that the WireGuard container can use them.\n  config_storage_path: /etc/wireguard/\n</code></pre></p> </li> </ul>"},{"location":"documentation/getting-started/docker/#image-versioning","title":"Image Versioning","text":"<p>All images are hosted on Docker Hub at https://hub.docker.com/r/wgportal/wg-portal or in the GitHub Container Registry.</p> <p>Version 2 is the current stable release. Version 1 has moved to legacy status and is no longer recommended.</p> <p>There are three types of tags in the repository:</p>"},{"location":"documentation/getting-started/docker/#semantic-versioned-tags","title":"Semantic versioned tags","text":"<p>For example, <code>2.0.0-rc.1</code> or <code>v2.0.0-rc.1</code>.</p> <p>These are official releases of WireGuard Portal. For production deployments of WireGuard Portal, we strongly recommend using one of these versioned tags instead of the latest or canary tags.</p> <p>There are different types of these tags:</p> <ul> <li>Major version tags: <code>v2</code> or <code>2</code>. These tags always refer to the latest image for WireGuard Portal version 2.</li> <li>Minor version tags: <code>v2.x</code> or <code>2.0</code>. These tags always refer to the latest image for WireGuard Portal version 2.x.</li> <li>Specific version tags (patch version): <code>v2.0.0</code> or <code>2.0.0</code>. These tags denote a very specific release. They correspond to the GitHub tags that we make, and you can see the release notes for them here: https://github.com/h44z/wg-portal/releases. Once these tags for a specific version show up in the Docker repository, they will never change. </li> </ul>"},{"location":"documentation/getting-started/docker/#the-latest-tag","title":"The <code>latest</code> tag","text":"<p>The lastest tag is the latest stable release of WireGuard Portal. For version 2, this is the same as the <code>v2</code> tag.</p>"},{"location":"documentation/getting-started/docker/#the-master-tag","title":"The <code>master</code> tag","text":"<p>This is the most recent build to the main branch! It changes a lot and is very unstable.</p> <p>We recommend that you don't use it except for development purposes or to test the latest features.</p>"},{"location":"documentation/getting-started/docker/#configuration","title":"Configuration","text":"<p>You can configure WireGuard Portal using a YAML configuration file. The filepath of the YAML configuration file defaults to <code>/app/config/config.yaml</code>. It is possible to override the configuration filepath using the environment variable WG_PORTAL_CONFIG.</p> <p>By default, WireGuard Portal uses an SQLite database. The database is stored in <code>/app/data/sqlite.db</code>.</p> <p>You should mount those directories as a volume:</p> <ul> <li><code>/app/data</code></li> <li><code>/app/config</code></li> </ul> <p>A detailed description of the configuration options can be found here.</p> <p>If you want to access configuration files in wg-quick format, you can mount the <code>/etc/wireguard</code> directory inside the container to a location of your choice. Also enable the <code>config_storage_path</code> option in the configuration file: <pre><code>advanced:\n  config_storage_path: /etc/wireguard\n</code></pre></p>"},{"location":"documentation/getting-started/helm/","title":"Helm","text":""},{"location":"documentation/getting-started/helm/#installing-the-chart","title":"Installing the Chart","text":"<p>To install the chart with the release name <code>wg-portal</code>:</p> <pre><code>helm install wg-portal oci://ghcr.io/h44z/charts/wg-portal\n</code></pre> <p>This command deploy wg-portal on the Kubernetes cluster in the default configuration. The Values section lists the parameters that can be configured during installation.</p>"},{"location":"documentation/getting-started/helm/#values","title":"Values","text":"Key Type Default Description nameOverride string <code>\"\"</code> Partially override resource names (adds suffix) fullnameOverride string <code>\"\"</code> Fully override resource names extraDeploy list <code>[]</code> Array of extra objects to deploy with the release config.advanced tpl/object <code>{}</code> Advanced configuration options. config.auth tpl/object <code>{}</code> Auth configuration options. config.core tpl/object <code>{}</code> Core configuration options. If external admins in <code>auth</code> are defined and there are no <code>admin_user</code> and <code>admin_password</code> defined here, the default admin account will be disabled. config.database tpl/object <code>{}</code> Database configuration options config.mail tpl/object <code>{}</code> Mail configuration options config.statistics tpl/object <code>{}</code> Statistics configuration options config.web tpl/object <code>{}</code> Web configuration options. <code>listening_address</code> will be set automatically from <code>service.web.port</code>. <code>external_url</code> is required to enable ingress and certificate resources. revisionHistoryLimit string <code>10</code> The number of old ReplicaSets to retain to allow rollback. workloadType string <code>\"Deployment\"</code> Workload type - <code>Deployment</code> or <code>StatefulSet</code> strategy object <code>{\"type\":\"RollingUpdate\"}</code> Update strategy for the workload Valid values are:  <code>RollingUpdate</code> or <code>Recreate</code> for Deployment,  <code>RollingUpdate</code> or <code>OnDelete</code> for StatefulSet image.repository string <code>\"ghcr.io/h44z/wg-portal\"</code> Image repository image.pullPolicy string <code>\"IfNotPresent\"</code> Image pull policy image.tag string <code>\"\"</code> Overrides the image tag whose default is the chart appVersion imagePullSecrets list <code>[]</code> Image pull secrets podAnnotations tpl/object <code>{}</code> Extra annotations to add to the pod podLabels object <code>{}</code> Extra labels to add to the pod podSecurityContext object <code>{}</code> Pod Security Context securityContext.capabilities.add list <code>[\"NET_ADMIN\"]</code> Add capabilities to the container initContainers tpl/list <code>[]</code> Pod init containers sidecarContainers tpl/list <code>[]</code> Pod sidecar containers dnsPolicy string <code>\"ClusterFirst\"</code> Set DNS policy for the pod. Valid values are <code>ClusterFirstWithHostNet</code>, <code>ClusterFirst</code>, <code>Default</code> or <code>None</code>. restartPolicy string <code>\"Always\"</code> Restart policy for all containers within the pod. Valid values are <code>Always</code>, <code>OnFailure</code> or <code>Never</code>. hostNetwork string <code>false</code>. Use the host's network namespace. resources object <code>{}</code> Resources requests and limits command list <code>[]</code> Overwrite pod command args list <code>[]</code> Additional pod arguments env tpl/list <code>[]</code> Additional environment variables envFrom tpl/list <code>[]</code> Additional environment variables from a secret or configMap livenessProbe object <code>{}</code> Liveness probe configuration readinessProbe object <code>{}</code> Readiness probe configuration startupProbe object <code>{}</code> Startup probe configuration volumes tpl/list <code>[]</code> Additional volumes volumeMounts tpl/list <code>[]</code> Additional volumeMounts nodeSelector object <code>{\"kubernetes.io/os\":\"linux\"}</code> Node Selector configuration tolerations list <code>[]</code> Tolerations configuration affinity object <code>{}</code> Affinity configuration service.mixed.enabled bool <code>false</code> Whether to create a single service for the web and wireguard interfaces service.mixed.type string <code>\"LoadBalancer\"</code> Service type service.web.annotations object <code>{}</code> Annotations for the web service service.web.type string <code>\"ClusterIP\"</code> Web service type service.web.port int <code>8888</code> Web service port Used for the web interface listener service.web.appProtocol string <code>\"http\"</code> Web service appProtocol. Will be auto set to <code>https</code> if certificate is enabled. service.wireguard.annotations object <code>{}</code> Annotations for the WireGuard service service.wireguard.type string <code>\"LoadBalancer\"</code> Wireguard service type service.wireguard.ports list <code>[51820]</code> Wireguard service ports. Exposes the WireGuard ports for created interfaces. Lowerest port is selected as start port for the first interface. Increment next port by 1 for each additional interface. service.metrics.port int <code>8787</code> ingress.enabled bool <code>false</code> Specifies whether an ingress resource should be created ingress.className string <code>\"\"</code> Ingress class name ingress.annotations object <code>{}</code> Ingress annotations ingress.tls bool <code>false</code> Ingress TLS configuration. Enable certificate resource or add ingress annotation to create required secret certificate.enabled bool <code>false</code> Specifies whether a certificate resource should be created. If enabled, certificate will be used for the web. certificate.issuer.name string <code>\"\"</code> Certificate issuer name certificate.issuer.kind string <code>\"\"</code> Certificate issuer kind (ClusterIssuer or Issuer) certificate.issuer.group string <code>\"cert-manager.io\"</code> Certificate issuer group certificate.duration string <code>\"\"</code> Optional. Documentation certificate.renewBefore string <code>\"\"</code> Optional. Documentation certificate.commonName string <code>\"\"</code> Optional. Documentation certificate.emailAddresses list <code>[]</code> Optional. Documentation certificate.ipAddresses list <code>[]</code> Optional. Documentation certificate.keystores object <code>{}</code> Optional. Documentation certificate.privateKey object <code>{}</code> Optional. Documentation certificate.secretTemplate object <code>{}</code> Optional. Documentation certificate.subject object <code>{}</code> Optional. Documentation certificate.uris list <code>[]</code> Optional. Documentation certificate.usages list <code>[]</code> Optional. Documentation persistence.enabled bool <code>false</code> Specifies whether an persistent volume should be created persistence.annotations object <code>{}</code> Persistent Volume Claim annotations persistence.storageClass string <code>\"\"</code> Persistent Volume storage class. If undefined (the default) cluster's default provisioner will be used. persistence.accessMode string <code>\"ReadWriteOnce\"</code> Persistent Volume Access Mode persistence.size string <code>\"1Gi\"</code> Persistent Volume size persistence.volumeName string <code>\"\"</code> Persistent Volume Name (optional) serviceAccount.create bool <code>true</code> Specifies whether a service account should be created serviceAccount.annotations object <code>{}</code> Service account annotations serviceAccount.automount bool <code>false</code> Automatically mount a ServiceAccount's API credentials serviceAccount.name string <code>\"\"</code> The name of the service account to use. If not set and create is true, a name is generated using the fullname template monitoring.enabled bool <code>false</code> Enable Prometheus monitoring. monitoring.apiVersion string <code>\"monitoring.coreos.com/v1\"</code> API version of the Prometheus resource. Use <code>azmonitoring.coreos.com/v1</code> for Azure Managed Prometheus. monitoring.kind string <code>\"PodMonitor\"</code> Kind of the Prometheus resource. Could be <code>PodMonitor</code> or <code>ServiceMonitor</code>. monitoring.labels object <code>{}</code> Resource labels. monitoring.annotations object <code>{}</code> Resource annotations. monitoring.interval string <code>1m</code> Interval at which metrics should be scraped. If not specified <code>config.statistics.data_collection_interval</code> interval is used. monitoring.metricRelabelings list <code>[]</code> Relabelings to samples before ingestion. monitoring.relabelings list <code>[]</code> Relabelings to samples before scraping. monitoring.scrapeTimeout string <code>\"\"</code> Timeout after which the scrape is ended If not specified, the Prometheus global scrape interval is used. monitoring.jobLabel string <code>\"\"</code> The label to use to retrieve the job name from. monitoring.podTargetLabels object <code>{}</code> Transfers labels on the Kubernetes Pod onto the target. monitoring.dashboard.enabled bool <code>false</code> Enable Grafana dashboard. monitoring.dashboard.annotations object <code>{}</code> Annotations for the dashboard ConfigMap. monitoring.dashboard.labels object <code>{}</code> Additional labels for the dashboard ConfigMap. monitoring.dashboard.namespace string <code>\"\"</code> Dashboard ConfigMap namespace Overrides the namespace for the dashboard ConfigMap."},{"location":"documentation/getting-started/reverse-proxy/","title":"Reverse Proxy (HTTPS)","text":""},{"location":"documentation/getting-started/reverse-proxy/#reverse-proxy-for-https","title":"Reverse Proxy for HTTPS","text":"<p>For production deployments, always serve the WireGuard Portal over HTTPS. You have two options to secure your connection:</p>"},{"location":"documentation/getting-started/reverse-proxy/#reverse-proxy","title":"Reverse Proxy","text":"<p>Let a front\u2010end proxy handle HTTPS for you. This also frees you from managing certificates manually and is therefore the preferred option. You can use Nginx, Traefik, Caddy or any other proxy. </p> <p>Below is an example using a Docker Compose stack with Traefik.  It exposes the WireGuard Portal on <code>https://wg.domain.com</code> and redirects initial HTTP traffic to HTTPS.</p> <pre><code>services:\n  reverse-proxy:\n    image: traefik:v3.3\n    restart: unless-stopped\n    command:\n      #- '--log.level=DEBUG'\n      - '--providers.docker.endpoint=unix:///var/run/docker.sock'\n      - '--providers.docker.exposedbydefault=false'\n      - '--entrypoints.web.address=:80'\n      - '--entrypoints.websecure.address=:443'\n      - '--entrypoints.websecure.http3'\n      - '--certificatesresolvers.letsencryptresolver.acme.httpchallenge=true'\n      - '--certificatesresolvers.letsencryptresolver.acme.httpchallenge.entrypoint=web'\n      - '--certificatesresolvers.letsencryptresolver.acme.email=your.email@domain.com'\n      - '--certificatesresolvers.letsencryptresolver.acme.storage=/letsencrypt/acme.json'\n      #- '--certificatesresolvers.letsencryptresolver.acme.caserver=https://acme-staging-v02.api.letsencrypt.org/directory'  # just for testing\n    ports:\n      - 80:80 # for HTTP\n      - 443:443/tcp  # for HTTPS\n      - 443:443/udp  # for HTTP/3\n    volumes:\n      - acme-certs:/letsencrypt\n      - /var/run/docker.sock:/var/run/docker.sock:ro\n    labels:\n      - 'traefik.enable=true'\n      # HTTP Catchall for redirecting HTTP -&gt; HTTPS\n      - 'traefik.http.routers.dashboard-catchall.rule=Host(`wg.domain.com`) &amp;&amp; PathPrefix(`/`)'\n      - 'traefik.http.routers.dashboard-catchall.entrypoints=web'\n      - 'traefik.http.routers.dashboard-catchall.middlewares=redirect-to-https'\n      - 'traefik.http.middlewares.redirect-to-https.redirectscheme.scheme=https'\n\n  wg-portal:\n    image: wgportal/wg-portal:v2\n    container_name: wg-portal\n    restart: unless-stopped\n    logging:\n      options:\n        max-size: \"10m\"\n        max-file: \"3\"\n    cap_add:\n      - NET_ADMIN\n    ports:\n      # host port : container port\n      # WireGuard port, needs to match the port in wg-portal interface config (add one port mapping for each interface)\n      - \"51820:51820/udp\"\n      # Web UI port (only available on localhost, Traefik will handle the HTTPS)\n      - \"127.0.0.1:8888:8888/tcp\"\n    sysctls:\n      - net.ipv4.conf.all.src_valid_mark=1\n    volumes:\n      # host path : container path\n      - ./wg/data:/app/data\n      - ./wg/config:/app/config\n    labels:\n      - 'traefik.enable=true'\n      - 'traefik.http.routers.wgportal.rule=Host(`wg.domain.com`)'\n      - 'traefik.http.routers.wgportal.entrypoints=websecure'\n      - 'traefik.http.routers.wgportal.tls.certresolver=letsencryptresolver'\n      - 'traefik.http.routers.wgportal.service=wgportal'\n      - 'traefik.http.services.wgportal.loadbalancer.server.port=8888'\n\nvolumes:\n  acme-certs:\n</code></pre> <p>The WireGuard Portal configuration must be updated accordingly so that the correct external URL is set for the web interface:</p> <pre><code>web:\n  external_url: https://wg.domain.com\n</code></pre>"},{"location":"documentation/getting-started/reverse-proxy/#built-in-tls","title":"Built-in TLS","text":"<p>If you prefer to let WireGuard Portal handle TLS itself, you can use the built-in TLS support. In your <code>config.yaml</code>, under the <code>web</code> section, point to your certificate and key files:</p> <pre><code>web:\n  cert_file: /path/to/your/fullchain.pem\n  key_file:  /path/to/your/privkey.pem\n</code></pre> <p>The web server will then use these files to serve HTTPS traffic directly instead of HTTP.</p>"},{"location":"documentation/getting-started/sources/","title":"Sources","text":"<p>To build the application from source files, use the Makefile provided in the repository.</p>"},{"location":"documentation/getting-started/sources/#requirements","title":"Requirements","text":"<ul> <li>Git</li> <li>Make</li> <li>Go: <code>&gt;=1.24.0</code></li> <li>Node.js with npm: <code>node&gt;=18, npm&gt;=9</code></li> </ul>"},{"location":"documentation/getting-started/sources/#build","title":"Build","text":"<pre><code># Get source code\ngit clone https://github.com/h44z/wg-portal -b ${WG_PORTAL_VERSION:-master} --depth 1\ncd wg-portal\n# Build the frontend\nmake frontend\n# Build the backend\nmake build\n</code></pre>"},{"location":"documentation/getting-started/sources/#install","title":"Install","text":"<p>Compiled binary will be available in <code>./dist</code> directory. </p> <p>For installation instructions, check the Binaries section.</p>"},{"location":"documentation/monitoring/prometheus/","title":"Monitoring","text":"<p>By default, WG-Portal exposes Prometheus metrics on port <code>8787</code> if interface/peer statistic data collection is enabled.</p>"},{"location":"documentation/monitoring/prometheus/#exposed-metrics","title":"Exposed Metrics","text":"Metric Type Description <code>wireguard_interface_received_bytes_total</code> gauge Bytes received through the interface. <code>wireguard_interface_sent_bytes_total</code> gauge Bytes sent through the interface. <code>wireguard_peer_last_handshake_seconds</code> gauge Seconds from the last handshake with the peer. <code>wireguard_peer_received_bytes_total</code> gauge Bytes received from the peer. <code>wireguard_peer_sent_bytes_total</code> gauge Bytes sent to the peer. <code>wireguard_peer_up</code> gauge Peer connection state (boolean: 1/0)."},{"location":"documentation/monitoring/prometheus/#prometheus-config","title":"Prometheus Config","text":"<p>Add the following scrape job to your Prometheus config file:</p> <pre><code># prometheus.yaml\nscrape_configs:\n  - job_name: wg-portal\n    scrape_interval: 60s\n    static_configs:\n      - targets:\n          - localhost:8787 # Change localhost to IP Address or hostname with WG-Portal\n</code></pre>"},{"location":"documentation/monitoring/prometheus/#grafana-dashboard","title":"Grafana Dashboard","text":"<p>You may import <code>dashboard.json</code> into your Grafana instance.</p> <p></p>"},{"location":"documentation/rest-api/api-doc/","title":"REST API","text":""},{"location":"documentation/upgrade/v1/","title":"Upgrade","text":"<p>Major upgrades between different versions may require special procedures, which are described in the following sections.</p>"},{"location":"documentation/upgrade/v1/#upgrade-from-v1-to-v2","title":"Upgrade from v1 to v2","text":"<p> Before upgrading from V1, make sure that you have a backup of your currently working configuration files and database!</p> <p>To start the upgrade process, start the wg-portal binary with the -migrateFrom parameter. The configuration (config.yaml) for WireGuard Portal must be updated and valid before starting the upgrade.</p> <p>To upgrade from a previous SQLite database, start wg-portal like:</p> <pre><code>./wg-portal-amd64 -migrateFrom=old_wg_portal.db\n</code></pre> <p>You can also specify the database type using the parameter -migrateFromType.  Supported database types: <code>mysql</code>, <code>mssql</code>, <code>postgres</code> or <code>sqlite</code>.</p> <p>For example:</p> <pre><code>./wg-portal-amd64 -migrateFromType=mysql -migrateFrom='user:pass@tcp(1.2.3.4:3306)/dbname?charset=utf8mb4&amp;parseTime=True&amp;loc=Local'\n</code></pre> <p>The upgrade will transform the old, existing database and store the values in the new database specified in the config.yaml configuration file. Ensure that the new database does not contain any data!</p> <p>If you are using Docker, you can adapt the docker-compose.yml file to start the upgrade process:</p> <pre><code>services:\n  wg-portal:\n    image: wgportal/wg-portal:v2\n    # ... other settings\n    restart: no\n    command: [\"-migrateFrom=/app/data/old_wg_portal.db\"]\n</code></pre>"},{"location":"documentation/usage/backends/","title":"Backends","text":"<p>WireGuard Portal can manage WireGuard interfaces and peers on different backends.  Each backend represents a system where interfaces actually live.  You can register multiple backends and choose which one to use per interface.  A global default backend determines where newly created interfaces go (unless you explicitly choose another in the UI).</p> <p>Supported backends: - Local (default): Manages interfaces on the host running WireGuard Portal (Linux WireGuard via wgctrl). Use this when the portal should directly configure wg devices on the same server. - MikroTik RouterOS (beta): Manages interfaces and peers on MikroTik devices via the RouterOS REST API. Use this to control WG interfaces on RouterOS v7+.</p> <p>How backend selection works: - The default backend is configured at <code>backend.default</code> (local or the id of a defined MikroTik backend).    New interfaces created in the UI will use this backend by default. - Each interface stores its backend. You can select a different backend when creating a new interface.</p>"},{"location":"documentation/usage/backends/#configuring-mikrotik-backends-routeros-v7","title":"Configuring MikroTik backends (RouterOS v7+)","text":"<p> The MikroTik backend is currently marked beta. While basic functionality is implemented, some advanced features are not yet implemented or contain bugs. Please test carefully before using in production.</p> <p>The MikroTik backend uses the REST API under a base URL ending with /rest.  You can register one or more MikroTik devices as backends for a single WireGuard Portal instance.</p>"},{"location":"documentation/usage/backends/#prerequisites-on-mikrotik","title":"Prerequisites on MikroTik:","text":"<ul> <li>RouterOS v7 with WireGuard support.</li> <li>REST API enabled and reachable over HTTP(S). A typical base URL is https://:8729/rest or https:///rest depending on your service setup. <li>A dedicated RouterOS user with the following group permissions:</li> <li>api (for logging in via REST API)</li> <li>rest-api (for logging in via REST API)</li> <li>read (to read interface and peer data)</li> <li>write (to create/update interfaces and peers)</li> <li>test (to perform ping checks)</li> <li>sensitive (to read private keys)</li> <li>TLS certificate on the device is recommended. If you use a self-signed certificate during testing, set <code>api_verify_tls</code>: false in wg-portal (not recommended for production).</li> <p>Example WireGuard Portal configuration (config/config.yaml):</p> <pre><code>backend:\n  # default backend decides where new interfaces are created\n  default: mikrotik-prod\n\n  mikrotik:\n    - id: mikrotik-prod              # unique id, not \"local\"\n      display_name: RouterOS RB5009  # optional nice name\n      api_url: https://10.10.10.10/rest\n      api_user: wgportal\n      api_password: a-super-secret-password\n      api_verify_tls: true         # set to false only if using self-signed during testing\n      api_timeout: 30s             # maximum request duration\n      concurrency: 5               # limit parallel REST calls to device\n      debug: false                 # verbose logging for this backend\n</code></pre>"},{"location":"documentation/usage/backends/#known-limitations","title":"Known limitations:","text":"<ul> <li>The MikroTik backend is still in beta. Some features may not work as expected.</li> <li>Not all WireGuard Portal features are supported yet (e.g., no support for interface hooks)</li> </ul>"},{"location":"documentation/usage/general/","title":"General","text":"<p>This documentation section describes the general usage of WireGuard Portal.  If you are looking for specific setup instructions, please refer to the Getting Started and Configuration sections,  for example, using a Docker deployment.</p>"},{"location":"documentation/usage/general/#basic-concepts","title":"Basic Concepts","text":"<p>WireGuard Portal is a web-based configuration portal for WireGuard server management. It allows managing multiple WireGuard interfaces and users from a single web UI. WireGuard Interfaces can be categorized into three types:</p> <ul> <li>Server: A WireGuard server interface that to which multiple peers can connect. In this mode, it is possible to specify default settings for all peers, such as the IP address range, DNS servers, and MTU size.</li> <li>Client: A WireGuard client interface that can be used to connect to a WireGuard server. Usually, such an interface has exactly one peer.</li> <li>Unknown: This is the default type for imported interfaces. It is encouraged to change the type to either <code>Server</code> or <code>Client</code> after importing the interface. </li> </ul>"},{"location":"documentation/usage/general/#accessing-the-web-ui","title":"Accessing the Web UI","text":"<p>The web UI should be accessed via the URL specified in the <code>external_url</code> property of the configuration file. By default, WireGuard Portal listens on port <code>8888</code> for HTTP connections. Check the Security section for more information on securing the web UI.</p> <p>So the default URL to access the web UI is:</p> <pre><code>http://localhost:8888\n</code></pre> <p>A freshly set-up WireGuard Portal instance will have a default admin user with the username <code>admin@wgportal.local</code> and the password <code>wgportal-default</code>.  You can and should override the default credentials in the configuration file. Make sure to change the default password immediately after the first login!</p>"},{"location":"documentation/usage/general/#basic-ui-description","title":"Basic UI Description","text":"<p>As seen in the screenshot above, the web UI is divided into several sections which are accessible via the navigation bar on the top of the screen.</p> <ol> <li>Home: The landing page of WireGuard Portal. It provides a staring point for the user to access the different sections of the web UI. It also provides quick links to WireGuard Client downloads or official documentation.</li> <li>Interfaces: This section allows you to manage the WireGuard interfaces. You can add, edit, or delete interfaces, as well as view their status and statistics. Peers for each interface can be managed here as well.</li> <li>Users: This section allows you to manage the users of WireGuard Portal. You can add, edit, or delete users, as well as view their status and statistics.</li> <li>Key Generator: This section allows you to generate WireGuard keys locally on your browser. The generated keys are never sent to the server. This is useful if you want to generate keys for a new peer without having to store the private keys in the database.</li> <li>Profile / Settings: This section allows you to access your own profile page, settings, and audit logs. </li> </ol>"},{"location":"documentation/usage/general/#interface-view","title":"Interface View","text":"<p>The interface view provides an overview of the WireGuard interfaces and peers configured in WireGuard Portal.</p> <p>The most important elements are:</p> <ol> <li>Interface Selector: This dropdown allows you to select the WireGuard interface you want to manage.     All further actions will be performed on the selected interface.</li> <li>Create new Interface: This button allows you to create a new WireGuard interface.</li> <li>Interface Overview: This section provides an overview of the selected WireGuard interface. It shows the interface type, number of peers, and other important information.</li> <li>List of Peers: This section provides a list of all peers associated with the selected WireGuard interface. You can view, add, edit, or delete peers from this list.</li> <li>Add new Peer: This button allows you to add a new peer to the selected WireGuard interface.</li> <li>Add multiple Peers: This button allows you to add multiple peers to the selected WireGuard interface.     This is useful if you want to add a large number of peers at once.</li> </ol>"},{"location":"documentation/usage/ldap/","title":"LDAP","text":"<p>WireGuard Portal lets you hook up any LDAP server such as Active Directory or OpenLDAP for both authentication and user sync.  You can even register multiple LDAP servers side-by-side. When someone logs in via LDAP, their specific provider is remembered,  so there's no risk of cross-provider conflicts. Details on the log-in process can be found in the Security documentation.</p> <p>If you enable LDAP synchronization, all users within the LDAP directory will be created automatically in the WireGuard Portal database if they do not exist. If a user is disabled or deleted in LDAP, the user will be disabled in WireGuard Portal as well.  The synchronization process can be fine-tuned by multiple parameters, which are described below.</p>"},{"location":"documentation/usage/ldap/#ldap-synchronization","title":"LDAP Synchronization","text":"<p>WireGuard Portal can automatically synchronize users from LDAP to the database.  To enable this feature, set the <code>sync_interval</code> property in the LDAP provider configuration to a value greater than \"0\". The value is a string representing a duration, such as \"15m\" for 15 minutes or \"1h\" for 1 hour (check the exact format definition for details). The synchronization process will run in the background and synchronize users from LDAP to the database at the specified interval. Also make sure that the <code>sync_filter</code> property is a well-formed LDAP filter, or synchronization will fail.</p>"},{"location":"documentation/usage/ldap/#limiting-synchronization-to-specific-users","title":"Limiting Synchronization to Specific Users","text":"<p>Use the <code>sync_filter</code> property in your LDAP provider block to restrict which users get synchronized.  It accepts any valid LDAP search filter, only entries matching that filter will be pulled into the portal's database. </p> <p>For example, to import only users with a <code>mail</code> attribute: <pre><code>auth:\n  ldap:\n    - id: ldap\n      # ... other settings\n      sync_filter: (mail=*)\n</code></pre></p>"},{"location":"documentation/usage/ldap/#disable-missing-users","title":"Disable Missing Users","text":"<p>If you set the <code>disable_missing</code> property to <code>true</code>, any user that is not found in LDAP during synchronization will be disabled in WireGuard Portal. All peers associated with that user will also be disabled.</p> <p>If you want a user and its peers to be automatically re-enabled once they are found in LDAP again, set the <code>auto_re_enable</code> property to <code>true</code>. This will only re-enable the user if they where disabled by the synchronization process. Manually disabled users will not be re-enabled.</p>"},{"location":"documentation/usage/security/","title":"Security","text":"<p>This section describes the security features available to administrators for hardening WireGuard Portal and protecting its data.</p>"},{"location":"documentation/usage/security/#authentication","title":"Authentication","text":"<p>WireGuard Portal supports multiple authentication methods, including:</p> <ul> <li>Local user accounts</li> <li>LDAP authentication</li> <li>OAuth and OIDC authentication</li> <li>Passkey authentication (WebAuthn)</li> </ul> <p>Users can have two roles which limit their permissions in WireGuard Portal:</p> <ul> <li>User: Can manage their own account and peers.</li> <li>Admin: Can manage all users and peers, including the ability to manage WireGuard interfaces.</li> </ul>"},{"location":"documentation/usage/security/#password-security","title":"Password Security","text":"<p>WireGuard Portal supports username and password authentication for both local and LDAP-backed accounts. Local users are stored in the database, while LDAP users are authenticated against an external LDAP server.</p> <p>On initial startup, WireGuard Portal automatically creates a local admin account with the password <code>wgportal-default</code>.</p> <p> This password must be changed immediately after the first login.</p> <p>The minimum password length for all local users can be configured in the <code>auth</code>  section of the configuration file. The default value is 16 characters, see <code>min_password_length</code>. The minimum password length is also enforced for the default admin user.</p>"},{"location":"documentation/usage/security/#passkey-webauthn-authentication","title":"Passkey (WebAuthn) Authentication","text":"<p>Besides the standard authentication mechanisms, WireGuard Portal supports Passkey authentication. This feature is enabled by default and can be configured in the <code>webauthn</code> section of the configuration file.</p> <p>Users can register multiple Passkeys to their account. These Passkeys can be used to log in to the web UI as long as the user is not locked.</p> <p> Passkey authentication does not disable password authentication. The password can still be used to log in (e.g., as a fallback).</p> <p>To register a Passkey, open the settings page (1) in the web UI and click on the \"Register Passkey\" (2) button.</p> <p></p>"},{"location":"documentation/usage/security/#oauth-and-oidc-authentication","title":"OAuth and OIDC Authentication","text":"<p>WireGuard Portal supports OAuth and OIDC authentication. You can use any OAuth or OIDC provider that supports the authorization code flow,  such as Google, GitHub, or Keycloak.</p> <p>For OAuth or OIDC to work, you need to configure the <code>external_url</code> property in the <code>web</code> section of the configuration file. If you are planning to expose the portal to the internet, make sure that the <code>external_url</code> is configured to use HTTPS.</p> <p>To add OIDC or OAuth authentication to WireGuard Portal, create a Client-ID and Client-Secret in your OAuth provider and  configure a new authentication provider in the <code>auth</code> section of the configuration file. Make sure that each configured provider has a unique <code>provider_name</code> property set. Samples can be seen here.</p>"},{"location":"documentation/usage/security/#limiting-login-to-specific-domains","title":"Limiting Login to Specific Domains","text":"<p>You can limit the login to specific domains by setting the <code>allowed_domains</code> property for OAuth or OIDC providers. This property is a comma-separated list of domains that are allowed to log in. The user's email address is checked against this list. For example, if you want to allow only users with an email address ending in <code>outlook.com</code> to log in, set the property as follows:</p> <pre><code>auth:\n  oidc:\n    - provider_name: \"oidc1\"\n      # ... other settings\n      allowed_domains:\n        - \"outlook.com\"\n</code></pre>"},{"location":"documentation/usage/security/#limit-login-to-existing-users","title":"Limit Login to Existing Users","text":"<p>You can limit the login to existing users only by setting the <code>registration_enabled</code> property to <code>false</code> for OAuth or OIDC providers. If registration is enabled, new users will be created in the database when they log in for the first time.</p>"},{"location":"documentation/usage/security/#admin-mapping","title":"Admin Mapping","text":"<p>You can map users to admin roles based on their attributes in the OAuth or OIDC provider. To do this, set the <code>admin_mapping</code> property for the provider. Administrative access can either be mapped by a specific attribute or by group membership.</p> <p>Attribute specific mapping can be achieved by setting the <code>admin_value_regex</code> and the <code>is_admin</code> property. The <code>admin_value_regex</code> property is a regular expression that is matched against the value of the <code>is_admin</code> attribute. The user is granted admin access if the regex matches the attribute value.</p> <p>Example: <pre><code>auth:\n  oidc:\n    - provider_name: \"oidc1\"\n      # ... other settings\n      field_map:\n        is_admin: \"wg_admin_prop\"\n      admin_mapping:\n        admin_value_regex: \"^true$\"\n</code></pre> The example above will grant admin access to users with the <code>wg_admin_prop</code> attribute set to <code>true</code>.</p> <p>Group membership mapping can be achieved by setting the <code>admin_group_regex</code> and <code>user_groups</code> property. The <code>admin_group_regex</code> property is a regular expression that is matched against the group names of the user. The user is granted admin access if the regex matches any of the group names.</p> <p>Example: <pre><code>auth:\n  oidc:\n    - provider_name: \"oidc1\"\n      # ... other settings\n      field_map:\n        user_groups: \"groups\"\n      admin_mapping:\n        admin_group_regex: \"^the-admin-group$\"\n</code></pre> The example above will grant admin access to users who are members of the <code>the-admin-group</code> group.</p>"},{"location":"documentation/usage/security/#ldap-authentication","title":"LDAP Authentication","text":"<p>WireGuard Portal supports LDAP authentication. You can use any LDAP server that supports the LDAP protocol, such as Active Directory or OpenLDAP. Multiple LDAP servers can be configured in the <code>auth</code> section of the configuration file.  WireGuard Portal remembers the authentication provider of the user and therefore avoids conflicts between multiple LDAP providers.</p> <p>To configure LDAP authentication, create a new <code>ldap</code> authentication provider in the <code>auth</code> section of the configuration file.</p>"},{"location":"documentation/usage/security/#limiting-login-to-specific-users","title":"Limiting Login to Specific Users","text":"<p>You can limit the login to specific users by setting the <code>login_filter</code> property for LDAP provider. This filter uses the LDAP search filter syntax. The username can be inserted into the query by placing the <code>{{login_identifier}}</code> placeholder in the filter. This placeholder will then be replaced with the username entered by the user during login.</p> <p>For example, if you want to allow only users with the <code>objectClass</code> attribute set to <code>organizationalPerson</code> to log in, set the property as follows:</p> <pre><code>auth:\n  ldap:\n    - provider_name: \"ldap1\"\n      # ... other settings\n      login_filter: \"(&amp;(objectClass=organizationalPerson)(uid={{login_identifier}}))\"\n</code></pre> <p>The <code>login_filter</code> should always be designed to return at most one user.</p>"},{"location":"documentation/usage/security/#limit-login-to-existing-users_1","title":"Limit Login to Existing Users","text":"<p>You can limit the login to existing users only by setting the <code>registration_enabled</code> property to <code>false</code> for LDAP providers. If registration is enabled, new users will be created in the database when they log in for the first time.</p>"},{"location":"documentation/usage/security/#admin-mapping_1","title":"Admin Mapping","text":"<p>You can map users to admin roles based on their group membership in the LDAP server. To do this, set the <code>admin_group</code> and <code>memberof</code> property for the provider. The <code>admin_group</code> property defines the distinguished name of the group that is allowed to log in as admin.  All groups that are listed in the <code>memberof</code> attribute of the user will be checked against this group. If one of the groups matches, the user is granted admin access.</p>"},{"location":"documentation/usage/security/#ui-and-api-access","title":"UI and API Access","text":"<p>WireGuard Portal provides a web UI and a REST API for user interaction. It is important to secure these interfaces to prevent unauthorized access and data breaches.</p>"},{"location":"documentation/usage/security/#https","title":"HTTPS","text":"<p>It is recommended to use HTTPS for all communication with the portal to prevent eavesdropping. </p> <p>Event though, WireGuard Portal supports HTTPS out of the box, it is recommended to use a reverse proxy like Nginx or Traefik to handle SSL termination and other security features. A detailed explanation is available in the Reverse Proxy section.</p>"},{"location":"documentation/usage/webhooks/","title":"Webhooks","text":"<p>Webhooks allow WireGuard Portal to notify external services about events such as user creation, device changes, or configuration updates. This enables integration with other systems and automation workflows.</p> <p>When webhooks are configured and a specified event occurs, WireGuard Portal sends an HTTP POST request to the configured webhook URL.  The payload contains event-specific data in JSON format.</p>"},{"location":"documentation/usage/webhooks/#configuration","title":"Configuration","text":"<p>All available configuration options for webhooks can be found in the configuration overview.</p> <p>A basic webhook configuration looks like this:</p> <pre><code>webhook:\n  url: https://your-service.example.com/webhook\n</code></pre>"},{"location":"documentation/usage/webhooks/#security","title":"Security","text":"<p>Webhooks can be secured by using a shared secret. This secret is included in the <code>Authorization</code> header of the webhook request, allowing your service to verify the authenticity of the request. You can set the shared secret in the webhook configuration:</p> <pre><code>webhook:\n  url: https://your-service.example.com/webhook\n  secret: \"Basic dXNlcm5hbWU6cGFzc3dvcmQ=\"\n</code></pre> <p>You should also make sure that your webhook endpoint is secured with HTTPS to prevent eavesdropping and tampering.</p>"},{"location":"documentation/usage/webhooks/#available-events","title":"Available Events","text":"<p>WireGuard Portal supports various events that can trigger webhooks. The following events are available:</p> <ul> <li><code>create</code>: Triggered when a new entity is created.</li> <li><code>update</code>: Triggered when an existing entity is updated.</li> <li><code>delete</code>: Triggered when an entity is deleted.</li> <li><code>connect</code>: Triggered when a user connects to the VPN.</li> <li><code>disconnect</code>: Triggered when a user disconnects from the VPN.</li> </ul> <p>The following entity models are supported for webhook events:</p> <ul> <li><code>user</code>: WireGuard Portal users support creation, update, or deletion events.</li> <li><code>peer</code>: Peers support creation, update, or deletion events. Via the <code>peer_metric</code> entity, you can also receive connection status updates.</li> <li><code>peer_metric</code>: Peer metrics support connection status updates, such as when a peer connects or disconnects.</li> <li><code>interface</code>: WireGuard interfaces support creation, update, or deletion events.</li> </ul>"},{"location":"documentation/usage/webhooks/#payload-structure","title":"Payload Structure","text":"<p>All webhook events send a JSON payload containing relevant data. The structure of the payload depends on the event type and entity involved. A common shell structure for webhook payloads is as follows:</p> <pre><code>{\n  \"event\": \"create\", // The event type, e.g. \"create\", \"update\", \"delete\", \"connect\", \"disconnect\"\n  \"entity\": \"user\",  // The entity type, e.g. \"user\", \"peer\", \"peer_metric\", \"interface\"\n  \"identifier\": \"the-user-identifier\", // Unique identifier of the entity, e.g. user ID or peer ID\n  \"payload\": {\n    // The payload of the event, e.g. a Peer model.\n    // Detailed model descriptions are provided below.\n  }\n}\n</code></pre>"},{"location":"documentation/usage/webhooks/#payload-models","title":"Payload Models","text":"<p>All payload models are encoded as JSON objects. Fields with empty values might be omitted in the payload.</p>"},{"location":"documentation/usage/webhooks/#user-payload-entity-user","title":"User Payload (entity: <code>user</code>)","text":"JSON Field Type Description CreatedBy string Creator identifier UpdatedBy string Last updater identifier CreatedAt time.Time Time of creation UpdatedAt time.Time Time of last update Identifier string Unique user identifier Email string User email Source string Authentication source ProviderName string Name of auth provider IsAdmin bool Whether user has admin privileges Firstname string User's first name (optional) Lastname string User's last name (optional) Phone string Contact phone number (optional) Department string User's department (optional) Notes string Additional notes (optional) Disabled *time.Time When user was disabled DisabledReason string Reason for deactivation Locked *time.Time When user account was locked LockedReason string Reason for being locked"},{"location":"documentation/usage/webhooks/#peer-payload-entity-peer","title":"Peer Payload (entity: <code>peer</code>)","text":"JSON Field Type Description CreatedBy string Creator identifier UpdatedBy string Last updater identifier CreatedAt time.Time Creation timestamp UpdatedAt time.Time Last update timestamp Endpoint string Peer endpoint address EndpointPublicKey string Public key of peer endpoint AllowedIPsStr string Allowed IPs ExtraAllowedIPsStr string Extra allowed IPs PresharedKey string Pre-shared key for encryption PersistentKeepalive int Keepalive interval in seconds DisplayName string Display name of the peer Identifier string Unique identifier UserIdentifier string Associated user ID (optional) InterfaceIdentifier string Interface this peer is attached to Disabled *time.Time When the peer was disabled DisabledReason string Reason for being disabled ExpiresAt *time.Time Expiration date Notes string Notes for this peer AutomaticallyCreated bool Whether peer was auto-generated PrivateKey string Peer private key PublicKey string Peer public key InterfaceType string Type of the peer interface Addresses []string IP addresses CheckAliveAddress string Address used for alive checks DnsStr string DNS servers DnsSearchStr string DNS search domains Mtu int MTU (Maximum Transmission Unit) FirewallMark uint32 Firewall mark (optional) RoutingTable string Custom routing table (optional) PreUp string Command before bringing up interface PostUp string Command after bringing up interface PreDown string Command before bringing down interface PostDown string Command after bringing down interface"},{"location":"documentation/usage/webhooks/#interface-payload-entity-interface","title":"Interface Payload (entity: <code>interface</code>)","text":"JSON Field Type Description CreatedBy string Creator identifier UpdatedBy string Last updater identifier CreatedAt time.Time Creation timestamp UpdatedAt time.Time Last update timestamp Identifier string Unique identifier PrivateKey string Private key for the interface PublicKey string Public key for the interface ListenPort int Listening port Addresses []string IP addresses DnsStr string DNS servers DnsSearchStr string DNS search domains Mtu int MTU (Maximum Transmission Unit) FirewallMark uint32 Firewall mark RoutingTable string Custom routing table PreUp string Command before bringing up interface PostUp string Command after bringing up interface PreDown string Command before bringing down interface PostDown string Command after bringing down interface SaveConfig bool Whether to save config to file DisplayName string Human-readable name Type string Type of interface DriverType string Driver used Disabled *time.Time When the interface was disabled DisabledReason string Reason for being disabled PeerDefNetworkStr string Default peer network configuration PeerDefDnsStr string Default peer DNS servers PeerDefDnsSearchStr string Default peer DNS search domains PeerDefEndpoint string Default peer endpoint PeerDefAllowedIPsStr string Default peer allowed IPs PeerDefMtu int Default peer MTU PeerDefPersistentKeepalive int Default keepalive value PeerDefFirewallMark uint32 Default firewall mark for peers PeerDefRoutingTable string Default routing table for peers PeerDefPreUp string Default peer pre-up command PeerDefPostUp string Default peer post-up command PeerDefPreDown string Default peer pre-down command PeerDefPostDown string Default peer post-down command"},{"location":"documentation/usage/webhooks/#peer-metrics-payload-entity-peer_metric","title":"Peer Metrics Payload (entity: <code>peer_metric</code>)","text":"JSON Field Type Description Status PeerStatus Current status of the peer Peer Peer Peer  data <p><code>PeerStatus</code> sub-structure:</p> JSON Field Type Description UpdatedAt time.Time Time of last status update IsConnected bool Is peer currently connected IsPingable bool Can peer be pinged LastPing *time.Time Time of last successful ping BytesReceived uint64 Bytes received from peer BytesTransmitted uint64 Bytes sent to peer Endpoint string Last known endpoint LastHandshake *time.Time Last successful handshake LastSessionStart *time.Time Time the last session began"},{"location":"documentation/usage/webhooks/#example-payloads","title":"Example Payloads","text":"<p>The following payload is an example of a webhook event when a peer connects to the VPN:</p> <pre><code>{\n  \"event\": \"connect\",\n  \"entity\": \"peer_metric\",\n  \"identifier\": \"Fb5TaziAs1WrPBjC/MFbWsIelVXvi0hDKZ3YQM9wmU8=\",\n  \"payload\": {\n    \"Status\": {\n      \"UpdatedAt\": \"2025-06-27T22:20:08.734900034+02:00\",\n      \"IsConnected\": true,\n      \"IsPingable\": false,\n      \"BytesReceived\": 212,\n      \"BytesTransmitted\": 2884,\n      \"Endpoint\": \"10.55.66.77:58756\",\n      \"LastHandshake\": \"2025-06-27T22:19:46.580842776+02:00\",\n      \"LastSessionStart\": \"2025-06-27T22:19:46.580842776+02:00\"\n    },\n    \"Peer\": {\n      \"CreatedBy\": \"admin@wgportal.local\",\n      \"UpdatedBy\": \"admin@wgportal.local\",\n      \"CreatedAt\": \"2025-06-26T21:43:49.251839574+02:00\",\n      \"UpdatedAt\": \"2025-06-27T22:18:39.67763985+02:00\",\n      \"Endpoint\": \"10.55.66.1:51820\",\n      \"EndpointPublicKey\": \"eiVibpi3C2PUPcx2kwA5s09OgHx7AEaKMd33k0LQ5mM=\",\n      \"AllowedIPsStr\": \"10.11.12.0/24,fdfd:d3ad:c0de:1234::/64\",\n      \"ExtraAllowedIPsStr\": \"\",\n      \"PresharedKey\": \"p9DDeLUSLOdQcjS8ZsBAiqUzwDIUvTyzavRZFuzhvyE=\",\n      \"PersistentKeepalive\": 16,\n      \"DisplayName\": \"Peer Fb5TaziA\",\n      \"Identifier\": \"Fb5TaziAs1WrPBjC/MFbWsIelVXvi0hDKZ3YQM9wmU8=\",\n      \"UserIdentifier\": \"admin@wgportal.local\",\n      \"InterfaceIdentifier\": \"wgTesting\",\n      \"AutomaticallyCreated\": false,\n      \"PrivateKey\": \"QBFNBe+7J49ergH0ze2TGUJMFrL/2bOL50Z2cgluYW8=\",\n      \"PublicKey\": \"Fb5TaziAs1WrPBjC/MFbWsIelVXvi0hDKZ3YQM9wmU8=\",\n      \"InterfaceType\": \"client\",\n      \"Addresses\": [\n        \"10.11.12.10/32\",\n        \"fdfd:d3ad:c0de:1234::a/128\"\n      ],\n      \"CheckAliveAddress\": \"\",\n      \"DnsStr\": \"\",\n      \"DnsSearchStr\": \"\",\n      \"Mtu\": 1420\n    }\n  }\n}\n</code></pre> <p>Here is another example of a webhook event when a peer is updated:</p> <pre><code>{\n  \"event\": \"update\",\n  \"entity\": \"peer\",\n  \"identifier\": \"Fb5TaziAs1WrPBjC/MFbWsIelVXvi0hDKZ3YQM9wmU8=\",\n  \"payload\": {\n    \"CreatedBy\": \"admin@wgportal.local\",\n    \"UpdatedBy\": \"admin@wgportal.local\",\n    \"CreatedAt\": \"2025-06-26T21:43:49.251839574+02:00\",\n    \"UpdatedAt\": \"2025-06-27T22:18:39.67763985+02:00\",\n    \"Endpoint\": \"10.55.66.1:51820\",\n    \"EndpointPublicKey\": \"eiVibpi3C2PUPcx2kwA5s09OgHx7AEaKMd33k0LQ5mM=\",\n    \"AllowedIPsStr\": \"10.11.12.0/24,fdfd:d3ad:c0de:1234::/64\",\n    \"ExtraAllowedIPsStr\": \"\",\n    \"PresharedKey\": \"p9DDeLUSLOdQcjS8ZsBAiqUzwDIUvTyzavRZFuzhvyE=\",\n    \"PersistentKeepalive\": 16,\n    \"DisplayName\": \"Peer Fb5TaziA\",\n    \"Identifier\": \"Fb5TaziAs1WrPBjC/MFbWsIelVXvi0hDKZ3YQM9wmU8=\",\n    \"UserIdentifier\": \"admin@wgportal.local\",\n    \"InterfaceIdentifier\": \"wgTesting\",\n    \"AutomaticallyCreated\": false,\n    \"PrivateKey\": \"QBFNBe+7J49ergH0ze2TGUJMFrL/2bOL50Z2cgluYW8=\",\n    \"PublicKey\": \"Fb5TaziAs1WrPBjC/MFbWsIelVXvi0hDKZ3YQM9wmU8=\",\n    \"InterfaceType\": \"client\",\n    \"Addresses\": [\n      \"10.11.12.10/32\",\n      \"fdfd:d3ad:c0de:1234::a/128\"\n    ],\n    \"CheckAliveAddress\": \"\",\n    \"DnsStr\": \"\",\n    \"DnsSearchStr\": \"\",\n    \"Mtu\": 1420\n  }\n}\n</code></pre>"}]}